---
- name: check if a cluster is already running
  shell: "docker ps | grep -sq 'ceph/daemon'"
  register: ceph_health
  changed_when: false
  failed_when: false

- include: checks.yml
  when: ceph_health.rc != 0

- name: check if it is Atomic host
  stat: path=/run/ostree-booted
  register: stat_ostree

- name: set fact for using Atomic host
  set_fact:
      is_atomic='{{ stat_ostree.stat.exists }}'

- include: pre_requisite.yml
- include: selinux.yml
  when: ansible_os_family == 'RedHat'

- include: fetch_configs.yml
- include: start_docker_osd.yml
