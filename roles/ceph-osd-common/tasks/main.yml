---
- name: include_tasks system_tuning.yml
  include_tasks: system_tuning.yml

- name: install dependencies
  package:
    name: parted
    state: present
  when:
    - not containerized_deployment
    - ansible_os_family != 'ClearLinux'

- name: include_tasks common.yml
  include_tasks: common.yml

- name: include build_devices.yml
  include_tasks: build_devices.yml

- name: read information about the devices
  parted:
    device: "{{ item }}"
    unit: MiB
  register: parted_results
  with_items: "{{ devices }}"