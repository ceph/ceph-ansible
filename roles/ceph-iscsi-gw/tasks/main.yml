---
- name: include installs/install_on_redhat.yml
  include: installs/install_on_redhat.yml
  when:
    - ansible_os_family == 'RedHat'
  tags:
    - package-install
  # Hard code this so we will skip the entire file instead of individual tasks (Default isn't Consistent)
  static: False

- name: include installs/install_on_debian.yml
  include: installs/install_on_debian.yml
  when:
    - ansible_os_family == 'Debian'
  tags:
    - package-install
  # Hard code this so we will skip the entire file instead of individual tasks (Default isn't Consistent)
  static: False

# no check_firewall for ISCSI?
- name: include misc/configure_firewall_rpm.yml
  include: misc/configure_firewall_rpm.yml
  when:
    - configure_firewall
    - ansible_os_family in ['RedHat', 'Suse']
  # Hard code this so we will skip the entire file instead of individual tasks (Default isn't Consistent)
  static: False

- name: include common.yml
  include: common.yml

- name: include non-container/prerequisites.yml
  include: non-container/prerequisites.yml
  when:
    - not containerized_deployment

# deploy_ssl_keys used the ansible controller to create self-signed crt/key/pub files
# and transfers them to /etc/ceph directory on each controller. SSL certs are used by
# the API for https support.
- name: include deploy_ssl_keys.yml
  include: deploy_ssl_keys.yml
  when:
    - generate_crt|bool

- name: include non-container/configure_iscsi.yml
  include: non-container/configure_iscsi.yml
  when:
    - not containerized_deployment

- name: include containerized.yml
  include: container/containerized.yml
  when:
    - containerized_deployment
