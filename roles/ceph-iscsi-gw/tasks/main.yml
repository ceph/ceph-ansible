---
- name: Include common.yml
  ansible.builtin.include_tasks: common.yml

- name: Include non-container/prerequisites.yml
  ansible.builtin.include_tasks: non-container/prerequisites.yml
  when: not containerized_deployment | bool

# deploy_ssl_keys used the ansible controller to create self-signed crt/key/pub files
# and transfers them to /etc/ceph directory on each controller. SSL certs are used by
# the API for https support.
- name: Include deploy_ssl_keys.yml
  ansible.builtin.include_tasks: deploy_ssl_keys.yml
  when: generate_crt | bool

- name: Include non-container/configure_iscsi.yml
  ansible.builtin.include_tasks: non-container/configure_iscsi.yml
  when:
    - not containerized_deployment | bool
    - not use_new_ceph_iscsi | bool

- name: Include non-container/postrequisites.yml
  ansible.builtin.include_tasks: non-container/postrequisites.yml
  when: not containerized_deployment | bool

- name: Include containerized.yml
  ansible.builtin.include_tasks: containerized.yml
  when: containerized_deployment | bool
