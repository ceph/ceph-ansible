---
# You can override vars by using host or group vars

###########
# INSTALL #
###########

# /!\ EITHER ACTIVE ceph_stable OR ceph_stable_ice OR ceph_dev /!\

# STABLE
########

# COMMUNITY VERSION
ceph_stable: true # use ceph stable branch
ceph_stable_key: https://ceph.com/git/?p=ceph.git;a=blob_plain;f=keys/release.asc
ceph_stable_release: giant # ceph stable release

# This option is needed for _both_ stable and dev version, so please always fill the right version
# # for supported distros, see http://ceph.com/rpm-{{ ceph_stable_release }}/
ceph_stable_redhat_distro: el7

# ENTERPRISE VERSION
ceph_stable_ice: false # use Inktank Ceph Enterprise
#ceph_stable_ice_url: https://download.inktank.com/enterprise
#ceph_stable_ice_temp_path: /opt/ICE/ceph-repo/
#ceph_stable_ice_kmod: 3.10-0.1.20140702gitdc9ac62.el7.x86_64
#ceph_stable_ice_distro: rhel7 # Please check the download website for the supported versions.
#ceph_stable_ice_version: 1.2.2
#ceph_stable_ice_kmod_version: 1.2
#ceph_stable_ice_user: # htaccess user
#ceph_stable_ice_password: # htaccess password

# DEV
# ###

ceph_dev: false # use ceph development branch
ceph_dev_key: https://ceph.com/git/?p=ceph.git;a=blob_plain;f=keys/autobuild.asc
ceph_dev_branch: master # development branch you would like to use e.g: master, wip-hack

# supported distros are centos6, centos7, fc17, fc18, fc19, fc20, fedora17, fedora18,
# fedora19, fedora20, opensuse12, sles0. (see http://gitbuilder.ceph.com/).
# For rhel, please pay attention to the versions: 'rhel6 3' or 'rhel 4', the fullname is _very_ important.
ceph_dev_redhat_distro: centos7


######################
# CEPH CONFIGURATION #
######################

## Ceph options
#
fsid: "{{ cluster_uuid.stdout }}"
monitor_interface: eth1

basic_ceph_config:
  global:
    fsid: "{{ fsid }}"
    auth cluster required: "cephx"
    auth service required: "cephx"
    auth client required: "cephx"
    cephx require signatures: true # Kernel RBD does NOT support signatures!
    cephx cluster require signatures: true
    cephx service require signatures: true
    max open files: 131072
    osd pool default pg num: 128
    osd pool default pgp num: 128
    osd pool default size: 2
    osd pool default min size: 1
    osd pool default crush rule: 0
    osd crush chooseleaf type: 1 # Useful in AIO mode
    debug_lockdep: 0/0
    debug_context: 0/0
    debug_crush: 0/0
    debug_buffer: 0/0
    debug_timer: 0/0
    debug_filer: 0/0
    debug_objecter: 0/0
    debug_rados: 0/0
    debug_rbd: 0/0
    debug_journaler: 0/0
    debug_objectcatcher: 0/0
    debug_client: 0/0
    debug_osd: 0/0
    debug_optracker: 0/0
    debug_objclass: 0/0
    debug_filestore: 0/0
    debug_journal: 0/0
    debug_ms: 0/0
    debug_monc: 0/0
    debug_tp: 0/0
    debug_auth: 0/0
    debug_finisher: 0/0
    debug_heartbeatmap: 0/0
    debug_perfcounter: 0/0
    debug_asok: 0/0
    debug_throttle: 0/0
    debug_mon: 0/0
    debug_paxos: 0/0
    debug_rgw: 0/0
  mon:
    mon osd down out interval: 600
    mon osd min down reporters: 7 # number of OSDs per host + 1
  osd:
    cluster network: 192.168.42.0/24
    public network: 192.168.42.0/24
    filestore op threads: 3
    osd journal size: 100
    osd journal aio: true
    osd mkfs type: xfs # only xfs supported by this version of config
    osd mkfs options xfs: "-f -i size=2048"
    osd mount options xfs: "rw,noexec,nodev,noatime,nodiratime,barrier=0"
    osd mon heartbeat interval: 30
    filestore merge threshold: 40
    filestore split multiple: 8
    osd op threads: 8
    filestore op threads: 8
    filestore max sync interval: 5
    osd max scrubs: 1
    osd recovery max active: 5
    osd max backfills: 2
    osd recovery op priority: 2
    osd recovery max chunk: 1048576
    osd recovery threads: 1
    osd crush update on start: false
  client:
    rbd cache: true
    rbd cache writethrough until flush: true
    admin socket: /var/run/ceph/$cluster-$type.$id.$pid.$cctid.asok
    log file: /var/log/qemu/qemu-guest-$pid.log
  mds:
    pouet: pouet
    foo: bar
  rgw:
    radosgw_frontend: civetweb
    radosgw_civetweb_port: 80


#############
# OS TUNING #
#############

disable_transparent_hugepage: true
disable_swap: true
os_tuning_params:
  - { name: kernel.pid_max, value: 4194303 }
  - { name: fs.file-max, value: 26234859 }
  - { name: vm.zone_reclaim_mode, value: 0 }
  - { name: vm.vfs_cache_pressure, value: 50 }


##########
# DOCKER #
##########

docker: false
