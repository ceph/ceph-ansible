---
- include: ./01_checks/01_check_system.yml tags=installceph

- include: ./01_checks/02_check_mandatory_vars.yml tags=installceph

- include: ./02_misc/01_system_tuning.yml tags=installceph
  when: osd_group_name in group_names

- include: ./03_pre_requisites/01_prerequisite_ice.yml tags=installceph
  when: ceph_stable_ice

- include: ./03_pre_requisites/02_prerequisite_rh_storage_iso_install.yml tags=installceph
  when:
    ceph_stable_rh_storage and
    ceph_stable_rh_storage_iso_install

- include: ./03_pre_requisites/03_prerequisite_rh_storage_cdn_install.yml tags=installceph
  when:
    ceph_stable_rh_storage and
    ceph_stable_rh_storage_cdn_install

- include: ./04_installs/01_install_on_redhat.yml tags=installceph
  when: ansible_os_family == 'RedHat'

- include: ./04_installs/02_install_on_debian.yml tags=installceph
  when: ansible_os_family == 'Debian'

- include: ./04_installs/03_install_rgw_on_redhat.yml tags=installceph
  when:
    ansible_os_family == 'RedHat' and
    radosgw_frontend == 'apache' and
    rgw_group_name in group_names

- include: ./04_installs/04_install_rgw_on_debian.yml tags=installceph
  when:
    ansible_os_family == 'Debian' and
    radosgw_frontend == 'apache' and
    rgw_group_name in group_names

- include: ./05_post_install.yml tags=postinstall
