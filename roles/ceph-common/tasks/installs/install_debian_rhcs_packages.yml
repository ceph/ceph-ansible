---
- name: generate packages to install for debian
  set_fact:
    _debian_rhcs_ceph_pkgs_to_install: [ "ceph-common" ]

- name: add packages to install per host
  set_fact:
    _debian_rhcs_ceph_pkgs_to_install: "{{ _debian_rhcs_ceph_pkgs_to_install + [ item.name ] }}"
  when: item.install
  with_items:
    - { name: "ceph-mon", install: (mon_group_name in group_names) }
    - { name: "ceph-osd", install: (osd_group_name in group_names) }
    - { name: "ceph-test", install: ceph-test }
    - { name: "radosgw", install: (rgw_group_name in group_names) }
    - { name: "ceph-fuse", install: (client_group_name in group_names) }

- name: install red hat storage ceph packages for debian
  apt:
    pkg: "{{ _debian_rhcs_ceph_pkgs_to_install }}"
    state: "{{ (upgrade_ceph_packages|bool) | ternary('latest','present') }}"
