---
- name: make sure monitor_interface or monitor_address or monitor_address_block is configured
  fail:
    msg: "Either monitor_interface, monitor_address, or monitor_address_block must be configured. Interface for the monitor to listen on or IP address of that interface"
  when:
    - monitor_interface == 'interface'
    - monitor_address == '0.0.0.0'
    - monitor_address_block == 'subnet'

- name: make sure pg num is set for cephfs pools
  fail:
    msg: "You must set pg num for your cephfs pools, see the cephfs_pools variable."
  with_items: "{{ cephfs_pools }}"
  when:
    - groups.get(mds_group_name, []) | length > 0
    - item.pgs == ''

- name: check keys has been filled in users.key variables
  fail:
    msg: "you must generate and set keys properly in users.key variables"
  with_items: "{{ keys }}"
  when:
    - user_config
    - item.key == 'ADD-KEYRING-HERE=='
