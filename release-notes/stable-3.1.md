ceph-ansible stable-3.1 release note
====================================

Deprecation warnings
--------------------

Using `mon_use_fqdn` or `mds_use_fqdn` is discouraged. This is not a functionnalaty we plan on supporting further.
As a result, ceph-ansible will now fail if the option `yes_i_want_to_use_fqdn` is not set to `True`. This option is only here for cluster that were deployed with FQDN already.

Ansible version support
-----------------------

This version support Ansible at least 2.4 and at max 2.5.


Ceph version support
--------------------

This version can deploy any version of Ceph starting from Jewel to Mimic.


Major changes from stable-3.0
-----------------------------

* site: fetch images in parallel ([#1963](https://github.com/ceph/ceph-ansible/pull/1963))
* rolling_update: upgrade: support for rbd mirror and nfs ([#2055](https://github.com/ceph/ceph-ansible/pull/2055))
* mgr: add ability to enable ceph mgr modules ([#1963](https://github.com/ceph/ceph-ansible/pull/1963))
* common: add openSUSE Leap 42.3 support ([#1963](https://github.com/ceph/ceph-ansible/pull/1963))
* module: ceph_volume ansible module ([#1963](https://github.com/ceph/ceph-ansible/pull/1963))
* module: ceph_key ansible module (Sébastien Han, [#2456](https://github.com/ceph/ceph-ansible/pull/2456))
* container: expose /var/run/ceph, this is handy for software that need socket access for monitoring purpose (Sébastien Han, [#2520](https://github.com/ceph/ceph-ansible/pull/2520))
* mon: support setting application pool when creating one (Guillaume Abrioux, [#2545](https://github.com/ceph/ceph-ansible/pull/2545))
* site: add support for installation checkpoint, this is helpful to do more profiling on which tasks/role took most of the time and how long they took. (Sébastien Han, [#2423](https://github.com/ceph/ceph-ansible/pull/2423))
* common: add AArch64 to supported architecture (Di Xu, [#2541](https://github.com/ceph/ceph-ansible/pull/2541))
* common: install packages as a list ([#1963](https://github.com/ceph/ceph-ansible/pull/1963))
* common: configure firewalld (Eduard Egorov, [#2196](https://github.com/ceph/ceph-ansible/pull/2196))
* container: add CPU and memory restriction flags for OSD (John Fulton, [#2246](https://github.com/ceph/ceph-ansible/pull/2246))
* module: add ceph_crush Ansible module and various enhancement on CRUSH hierarchy creation (Sébastien Han, [#2409](https://github.com/ceph/ceph-ansible/pull/2409))
* ansible: tune ansible.cfg (Jorge Tudela, [#2436](https://github.com/ceph/ceph-ansible/pull/2436))
* client: create keys and pools for client nodes only on first node, this a major performance and ressource usage improvement (Guillaume Abrioux, [#2487](https://github.com/ceph/ceph-ansible/pull/2487))
* site: ability to only generate a ceph.conf on the machines (Sébastien Han, [#2383](https://github.com/ceph/ceph-ansible/pull/2383))

Notable changes
---------------

* 99f84f88 igw: fix image removal during purge (Mike Christie)
* f3f734f8 igw: do not fail purge on rbd removal errors (Mike Christie)
* 47fb07af osd: do not remove expose_partition container (Sébastien Han)
* 11d96d08 ceph-osds: backward compatibility with jewel for osp pools creation (Guillaume Abrioux)
* 75d68040 rbd-mirror: bring back compatibility with jewel deployment (Guillaume Abrioux)
* 1ab0f2ce iscsigw: do not run common roles when deploying jewel (Guillaume Abrioux)
* 40135a56 tests: leave an OSD node in default crush root (Guillaume Abrioux)
* 04ec87f3 ceph ansible 3.1 igw: fix rbd-target-gw startup (Mike Christie)
* 154b1dcc rgw: add more config option for civetweb frontend (Sébastien Han)
* 9184b794 Run creation of empty rados index object to first monitor (Giulio Fidente)
* a4c87e20 tests: add mimic support in stable-3.1 (Guillaume Abrioux)
* 3d19e1bc tests: do not deploy all daemons for shrink osds scenarios (Guillaume Abrioux)
* 36f24a80 shrink-osd: purge osd on containerized deployment (Sébastien Han)
* a3fd9c85 tests: stop hardcoding ansible version (Guillaume Abrioux)
* 9db4a23d tests: add latest-bis-jewel for jewel tests (Guillaume Abrioux)
* 6e464fbc nfs: change default stable branch for nfs-ganesha repo (Guillaume Abrioux)
* 3b74a691 client: do not rely on copy_admin_key to import keys (Guillaume Abrioux)
* aee48a40 mgr: fix condition to add modules to ceph-mgr (Guillaume Abrioux)
* 6fe3c706 tests: skip rgw_tuning_pools_are_set when rgw_create_pools is not defined (Guillaume Abrioux)
* ee1cc6b6 tests: skip tests for node iscsi-gw when deploying jewel (Guillaume Abrioux)
* b8dde664 tests: refact test_all_*_osds_are_up_and_in (Guillaume Abrioux)
* ee59e06e tests: fix broken test when collocated daemons scenarios (Guillaume Abrioux)
* 9323b8d7 tests: fix `_get_osd_id_from_host()` in TestOSDs() (Guillaume Abrioux)
* 4c7d2b1c tests: refact test_all_*_osds_are_up_and_in (Guillaume Abrioux)
* 3b6afdee tests: factorize docker tests using docker_exec_cmd logic (Guillaume Abrioux)
* 06392b27 tests: add mimic support for test_rbd_mirror_is_up() (Guillaume Abrioux)
* f8a4c57c common: switch from docker module to docker_container (Guillaume Abrioux)
* 722e7412 mon: ensure socker is purged when mon is stopped (Guillaume Abrioux)
* 8d954795 ceph-config: do not log cluster log on container (Sébastien Han)
* d565f28e ceph-common: fix rhcs condition (Sébastien Han)
* b3abd677 mgr: fix enabling of mgr module on mimic (Guillaume Abrioux)
* 837d5a44 ceph-client: do not kill the dummy container (Sébastien Han)
* ceded7e2 ceph-defaults: add default application to pool (Sébastien Han)
* d6f265f5 ceph-mds: enable application pool (Sébastien Han)
* 6431976e Enable monitor repo for mgr nodes and Tools repo for iscsi/nfs/clients (Vasu Kulkarni)
* 2b471094 ceph-mon: Generate initial keyring (Ha Phan)
* 863e99ea systemd: remove changed_when: false (Sébastien Han)
* 89945f8d ceph-osd: trigger osd container restart on script change (Sébastien Han)
* fae6e6e0 tests: reduce the amount of time we wait (Guillaume Abrioux)
* 06275d22 mon: honour mon_docker_net_host option (Sébastien Han)
* df3ecb45 tests: add more nodes in ooo testing scenario (Guillaume Abrioux)
* 92d92160 tests: fix *_has_correct_value tests (Guillaume Abrioux)
* 045ba36e common: remove duplicate include of configure_firewall_rpm.yml (Guillaume Abrioux)
* 7a099bb5 common: start firewalld if configure_firewall (Sébastien Han)
* 60c06a7a mon/osd: bump container memory limit (Sébastien Han)
* 2670a1f4 tests: keep same ceph release during handlers/idempotency test (Guillaume Abrioux)
* 2bcc1c71 ceph-mds: do not enable multimds on jewel (Patrick Donnelly)
* 35af792f client: try to kill dummy container only on first client node (Guillaume Abrioux)
* 5137bc26 ceph-osd: set 'openstack_keys_tmp' only when 'openstack_config' is defined. (Konstantin Shalygin)
* 408ef69f common: ability to enable/disable fw configuration (Sébastien Han)
* d1c361cd tests: set CEPH_DOCKER_IMAGE_TAG when ceph release is luminous (Guillaume Abrioux)
* 156daf10 tests: increase memory to 1024Mb for centos7_cluster scenario (Guillaume Abrioux)
* 18e79421 client: keyrings aren't created when single client node (Guillaume Abrioux)
* fd10fced tests: update ooo inventory hostfile (Guillaume Abrioux)
* c35203da client: add a default value for keyring file (Guillaume Abrioux)
* 7bcb005e client: use dummy created container when there is no mon in inventory (Guillaume Abrioux)
* 48e7cc50 tests: improve mds tests (Guillaume Abrioux)
* 9d50874d osd: copy openstack keys over to all mon (Guillaume Abrioux)
* c5335569 rolling_update: fix facts gathering delegation (Guillaume Abrioux)
* 5199300a test: do not always copy admin key (Sébastien Han)
* 4c5042ae change max_mds default to 1 (Patrick Donnelly)
* f940163a tests: fix rgw tests (Guillaume Abrioux)
* a558d8ae rgw: refact rgw pools creation (Guillaume Abrioux)
* 36b2c4a5 rgws: renames create_pools variable with rgw_create_pools. (jtudelag)
* 1d94d12c Adds RGWs pool creation to containerized installation. (jtudelag)
* cd6ef8e9 tests: skip disabling fastest mirror detection on atomic host (Guillaume Abrioux)
* 51a7eb5a ceph-defaults: Enable local epel repository (Erwan Velu)
* c90535ec Fix template reference for ganesha.conf (Andy McCrae)
* 53dfd050 ceph-defaults: add the nautilus 14.x entry to ceph_release_num (Andrew Schoen)
* 28319698 mons: move set_fact of openstack_keys in ceph-osd (Guillaume Abrioux)
* 9c91bb8b osds: wait for osds to be up before creating pools (Guillaume Abrioux)
* 01701eed Makefile: followup on #2585 (Guillaume Abrioux)
* b0356972 Makefile: add "make tag" command (Ken Dreyer)
* 2ac720d2 rgw: container add option to configure multi-site zone (Sébastien Han)
* 4f0850ad mon: remove check on pg_num for cephfs_pools (Guillaume Abrioux)
* 4328e0b4 mdss: do not make pg_num a mandatory params (Guillaume Abrioux)
* 77b02fe7 tests: fix broken symlink (Guillaume Abrioux)
* 6ee4b228 osds: do not set docker_exec_cmd fact (Guillaume Abrioux)
* e1c1017e tests: resize root partition when atomic host (Guillaume Abrioux)
* 92f0de37 tests: avoid yum failures (Guillaume Abrioux)
* 220d528e mds: move mds fs pools creation (Guillaume Abrioux)
* bdff7204 Add privilege escalation to iscsi purge tasks (Paul Cuzner)
* 0d3bce95 playbook: follow up on #2553 (Guillaume Abrioux)
* 49f6d3cb ceph-defaults: move cephfs vars from the ceph-mon role (Andrew Schoen)
* 1fe58744 group_vars: resync group_vars (Sébastien Han)
* 683bec9e mdss: move cephfs pools creation in ceph-mds (Guillaume Abrioux)
* b00a3cf7 tests: move cephfs_pools variable (Guillaume Abrioux)
* 873abdbf osds: move openstack pools creation in ceph-osd (Guillaume Abrioux)
* 4487eaba defaults: resync sample files with actual defaults (Guillaume Abrioux)
* d7f0ea33 ceph-radosgw: disable NSS PKI db when SSL is disabled (Luigi Toscano)
* 7b2cefd9 rhcs: bump version to 3.0 for stable 3.1 (Sébastien Han)
* 0e0bd09b Skip GPT header creation for lvm osd scenario (Vishal Kanaujia)
* 37693870 rolling_update: fix get fsid for containers (Sébastien Han)
* 747b545a Fix restarting OSDs twice during a rolling update. (Subhachandra Chandra)
* ddafad3f switch: disable ceph-disk units (Sébastien Han)
* ec528b92 purge_cluster: fix dmcrypt purge (Guillaume Abrioux)
* 17ee4e92 purge_cluster: wipe all partitions (Guillaume Abrioux)
* 7d0e072d purge_cluster: fix bug when building device list (Guillaume Abrioux)
* 831491f7 defaults: restart_osd_daemon unit spaces (Sébastien Han)
* e1aa85f0 Do nothing when mgr module is in good state (Michael Vollman)
* fb030423 take-over: fix bug when trying to override variable (Guillaume Abrioux)
* 1556b69e rolling_update: move osd flag section (Sébastien Han)
* 861f4b87 client: remove default value for pg_num in pools creation (Guillaume Abrioux)
* 1de47563 rolling_update: move mgr key creation (Sébastien Han)
* 9ca1d1d5 Revert "mon: fix mgr keyring creation when upgrading from jewel" (Sébastien Han)
* 6338f749 rolling_update: fix dest path for mgr keys fetching (Guillaume Abrioux)
* 7c7f517b iscsi-gw: fix issue when trying to mask target (Guillaume Abrioux)
* 0bb7e6dd iscsi: add python-rtslib repository (Sébastien Han)
* 54ef0496 Allow os_tuning_params to overwrite fs.aio-max-nr (Andy McCrae)
* b6ea36e9 adds missing state needed to upgrade nfs-ganesha (Gregory Meno)
* 259fae93 mon: fix mgr keyring creation when upgrading from jewel (Guillaume Abrioux)
* 7b387b50 osd: clean legacy syntax in ceph-osd-run.sh.j2 (Guillaume Abrioux)
* b12bf62c Make sure the restart_mds_daemon script is created with the correct MDS name (Simone Caronni)
* 07ca91b5 common: enable Tools repo for rhcs clients (Sébastien Han)
* e99351b9 Fix install of nfs-ganesha-ceph for Debian/SuSE (Andy McCrae)
* 75733daf playbook: improve facts gathering (Guillaume Abrioux)
* 31762ded ceph-nfs: disable attribute caching (Ramana Raja)
* 4a186237 common: copy iso files if rolling_update (Sébastien Han)
* d142be04 Move apt cache update to individual task per role (Andy McCrae)
* 6fe8df62 client: fix pool creation (Guillaume Abrioux)
* 43e23ffe mon: change application pool support (Sébastien Han)
* 75ed437d check if pools already exist before creating them (Guillaume Abrioux)
* a68091c9 tests: update the type for the rule used in pools (Guillaume Abrioux)
* adeecc51 switch: fix ceph_uid fact for osd (Guillaume Abrioux)
* 5fa92804 switch: resolve device path so we can umount the osd data dir (Sébastien Han)
* 767abb5d switch: fix ceph_uid fact (Sébastien Han)
* bbc9942d Revert "add .vscode/ to gitignore" (Sébastien Han)
* 12eebc31 mon/client: honor key mode when copying it to other nodes (Sébastien Han)
* 71efa2ea ci: bump client nodes to 2 (Sébastien Han)
* 74494253 mon: remove redundant copy task (Sébastien Han)
* 85732d11 mon/client: remove acl code (Sébastien Han)
* cfe8e51d mon/client: apply mode from ceph_key (Sébastien Han)
* 59551351 ceph_key: ability to apply a mode to a file (Sébastien Han)
* 113eb254 add AArch64 to supported architecture (Di Xu)
* 949507d3 mon: remove mgr key from ceph_config_keys (Sébastien Han)
* 35c1eb71 mon: remove mon map from ceph_config_keys (Sébastien Han)
* 62ec33d1 config_template: resync with upstream (Sébastien Han)
* 203c9af0 ci: test ansible 2.5 (Sébastien Han)
* 65ba85af Expose /var/run/ceph (Sébastien Han)
* bf1e70e8 default: extent ceph_uid and gid (Sébastien Han)
* f3656ad1 move create ceph initial directories to default (Sébastien Han)
* 66c1ea8c shrink-osd: ability to shrink NVMe drives (Sébastien Han)
* 641f141c selinux: remove chcon calls (Sébastien Han)
* 90e47c5f client: add a --rm option to run the container (Sébastien Han)
* 6c742376 client: import the key in ceph is copy_admin_key is true (Sébastien Han)
* 42481550 client: add quotes to the dict values (Sébastien Han)
* 8e386751 Add support for --diff in config_template (Andy McCrae)
* d2a2793c refactor the way we copy keys (Sébastien Han)
* 127a643f ceph-defaults: fix ceph_uid fact on container deployments (Randy J. Martinez)
* a98885a7 rhcs: re-add apt-pining (Sébastien Han)
* 899b0eb4 defaults: check only 1 time if there is a running cluster (Guillaume Abrioux)
* ac41efd3 site: make it more readable (Guillaume Abrioux)
* 5bbbce52 osd: do not do anything if the dev has a partition (Sébastien Han)
* 77831ccb tests: update tests for mds to cover multimds case (Guillaume Abrioux)
* 37117071 common: add tools repo for iscsi gw (Sébastien Han)
* c8573fe0 Remove deprecated allow_multimds (Douglas Fuller)
* 020e66c1 Fixed a typo (extra space) (vasishta p shastry)
* e1a1f81b osd: to support copy_admin_key (vasishta p shastry)
* db3a5ce6 mds: to support copy_admin_keyring (vasishta p shastry)
* 6b59416f nfs: to support copy_admin_key - containerized (vasishta p shastry)
* 01c58695 nfs: ensure nfs-server server is stopped (Ali Maredia)
* 4a430ae2 ceph-nfs: allow disabling ganesha caching (Ramana Raja)
* 82ccbdaf ceph-defaults: bring backward compatibility for old syntax (Sébastien Han)
* 82589021 ci: fix tripleO scenario (Sébastien Han)
* 2011ec3b ci: client copy admin key (Sébastien Han)
* cf73647e ci: remove useless tests (Sébastien Han)
* 9657e4d6 ceph_key: use ceph_key in the playbook (Sébastien Han)
* 473939d2 infra: add playbook example for ceph_key module (Sébastien Han)
* 2a924c10 add ceph_key module (Sébastien Han)
* 4a4fb1a4 ceph_volume: objectstore should default to 'bluestore' (Andrew Schoen)
* 08f48755 ceph_volume: refactor to not run ceph osd destroy (Andrew Schoen)
* 36e71f65 ceph_volume: perserve newlines in stdout and stderr when zapping (Andrew Schoen)
* c6e8f8fb purge-cluster: no need to use objectstore for ceph_volume module (Andrew Schoen)
* a8b0d3f0 ceph_volume: rc should be 0 on successful runs (Andrew Schoen)
* dbd52741 ceph_volume: defines the zap param in module_args (Andrew Schoen)
* a9b4c01b ceph_volume: make state not required so I can provide a default (Andrew Schoen)
* 9f469e2c ceph_volume: objectstore is now optional except when state is present (Andrew Schoen)
* c29a75ac purge-cluster: use ceph_volume module to zap and destroy OSDs (Andrew Schoen)
* 98e237d2 tests: no need to remove partitions in lvm_setup.yml (Andrew Schoen)
* 59e700c9 ceph_volume: adds a zap property and reworks to support state: absent (Andrew Schoen)
* b553a734 ceph_volume: adds a state property (Andrew Schoen)
* 796caf7d ceph_volume: remove the subcommand argument (Andrew Schoen)
* d1f2d64b purge-docker: added conditionals needed to successfully re-run purge (Randy J. Martinez)
* ad26d842 Fixed wrong path of ceph.conf in docs. (JohnHaan)
* 66c4118d defaults: fix backward compatibility (Guillaume Abrioux)
* 3752cc6f common: upgrade/install ceph-test RPM first (Ken Dreyer)
* bb60f2fe ceph-defaults: fix ceoh_uid for container image tag latest (Sébastien Han)
* 14eff6b5 tox: use container latest tag for upgrades (Sébastien Han)
* 0123d790 Use the CentOS repo for Red Hat dev packages (Zack Cerza)
* d981c6bd site-docker: followup on #2487 (Guillaume Abrioux)
* 3c4319ca add .vscode/ to gitignore (Sébastien Han)
* ecd3563c Deploying without managed monitors failed (Attila Fazekas)
* dcf6a246 defaults: remove `run_once: true` when creating fetch_directory (Guillaume Abrioux)
* 18c0c7a5 config: use fact `ceph_uid` (Guillaume Abrioux)
* 9c979c63 clients: refact `ceph-clients` role (Guillaume Abrioux)
* cefd4719 client: remove legacy code (Guillaume Abrioux)
* 9d3517c6 container: play docker-common only on first client node (Guillaume Abrioux)
* cf27c5e9 move selinux check to `ceph-defaults` (Guillaume Abrioux)
* f3caee84 ceph-iscsi: fix certificates generation and distribution (Sébastien Han)
* 5b73be25 do not delegate facts on client nodes (Guillaume Abrioux)
* e32a177a purge-docker: remove redundant task (Guillaume Abrioux)
* ca572a11 ceph-mds: delete duplicate tasks which cause multimds container deployments to fail. (Randy J. Martinez)
* 3fcf9668 ceph-osd note that some scenarios use ceph-disk vs. ceph-volume (Alfredo Deza)
* e6e6bd07 Refer to expected-num-ojects as expected_num_objects, not size (John Fulton)
* 691ddf53 cleanup osd.conf.j2 in ceph-osd (Ning Yao)
* 7f915473 setup cephx keys when not nfs_obj_gw (Patrick Donnelly)
* 6cffbd54 ceph-defaults: set is_atomic variable (Andrew Schoen)
* fe4ba9d1 Fix config_template to consistently order sections (Andy McCrae)
* 388562a4 Simplify ceph.conf generation (Andy McCrae)
* e3275c1c osd: add fs.aio-max-nr tuning (Sébastien Han)
* f432819c osd: apply systcl right away (Sébastien Han)
* 0f8a4251 move system tuning to osd role (Sébastien Han)
* 3ab89ab4 ci: re-arrange group_vars files (Sébastien Han)
* d5f8cac8 ci: remove left over iscsi_gws file (Sébastien Han)
* 8000ae34 remove unsed ceph_rgw_civetweb_port variable (Sébastien Han)
* f119b25b client: implement proper pools creation (Sébastien Han)
* e302c1ba mon: add support for erasure code pool (Sébastien Han)
* 277d885b mon: add support for pgp, pool type and rule name (Sébastien Han)
* 4806ff4f ci: test pool creation on container (Sébastien Han)
* 26bc00fb mon: fail if pool creation fails (Sébastien Han)
* 0011edd2 mon: add support for expected-num-objects (Sébastien Han)
* 18402b63 defaults: add useful info if daemon are not restarted properly (Sébastien Han)
* 3a9d0c55 Tune ansible.cfg (jtudelag)
* 60d4b75f Cleanup plugins directories and references (Andy McCrae)
* 691f7c51 Adds handy ceph aliases whe containerized installations. (jtudelag)
* 9181c94a client: fix pgs num for client pool creation (Guillaume Abrioux)
* 96c049be common: run updatedb task on debian systems only (Sébastien Han)
* a52ed430 mon: fix osd_pool_default_crush_rule persistence and effectiveness (Sébastien Han)
* 47cef7a4 mon: fix set crush default rule (Sébastien Han)
* 3261ab23 osd: remove old crush_location implementation (Sébastien Han)
* fc0fa48e test: add tests for creating crush tree (Sébastien Han)
* 73c48467 mon: use ceph_crush module in the playbook (Sébastien Han)
* 5fac3784 add ceph_crush module (Sébastien Han)
* 78c1f193 mons: Current crush_rule playbook does not work if there is no default rule defined (default: true). One * could want to add new crush rules while keeping his current default rule. Fixed it so that it works with all rules * defined as "default: false". If multiple rules are defined as default (should not be) then the last rule listed in * "crush_rules" is taken as default. (Greg Charot)
* 77f9c1df no reason the ceph-ansible ansible default provided crush_rule_hdd rule should be set as rack root + * default ruleset (Greg Charot)
* 50afc3fb We don't want to automatically move the rbd pool to the new default crush rule. This operation shall be * performed by the cluster operator. (Greg Charot)
* f2e0ceed add support for installation checkpoint (Sébastien Han)
* 04ca685b Remove vars that are no longer used (Andy McCrae)
* c3267b77 Makes use of docker_exec_cmd in ceph-mon role. (jtudelag)
* cb0f5989 common: run updatedb task on debian systems only (Sébastien Han)
* 7f19df81 rgw: add cluster name option to the handler (Sébastien Han)
* fd94840a ci: add copy_admin_key test to container scenario (Sébastien Han)
* 9c852806 rgw: ability to copy ceph admin key on containerized (Sébastien Han)
* 67f46d8e rgw: run the handler on a mon host (Sébastien Han)
* 1e283bf6 tests: make CI jobs using 'ansible.cfg' (Guillaume Abrioux)
* 6d35bc9b client: use `ceph_uid` fact to set uid/gid on admin key (Guillaume Abrioux)
* 1e1b26ca mds: fix ansible_service_mgr typo (Grant Slater)
* c33dae75 Revert "[TEST] Test setting up correct systemd file for nfs-ganesha" (Andy McCrae)
* a83e1aee Make rule_name optional when defining items in openstack_pools (Giulio Fidente)
* 165d9dec remove kernel.pid_max (Sébastien Han)
* 4a898645 tests: change ceph_docker_image_tag for 2nd run (Guillaume Abrioux)
* 707458c9 ci: add tripleo scenario testing (Guillaume Abrioux)
* 2779d2a8 Adjust /etc/updatedb.conf to not parse /var/lib/ceph (Andy McCrae)
* e88af3c4 [TEST] Test setting up correct systemd file for nfs-ganesha (Andy McCrae)
* c04e6734 update: look for short and fqdn in ceph_health_raw (Guillaume Abrioux)
* 463b5c6b Remove redundant task to check if atomic (Paul Bourke)
* 59a4335a Restart services if handler called (Andy McCrae)
* c816a928 container: osd remove run_once (Sébastien Han)
* d47d02a5 docker-common: fix container restart on new image (Sébastien Han)
* ebc19548 default: remove duplicate code (Sébastien Han)
* 7d690878 test: add test for containers resources changes (Sébastien Han)
* 79864a89 test: add test for restart on new container image (Sébastien Han)
* 699c777e rolling update: fix undefined jewel_minor_update failure (Andrew Schoen)
* 7c7017eb infra: do not include host_vars/* in take-over-existing-cluster.yml (Andrew Schoen)
* 0be60456 osd: Add support for multipath disks (Caleb Boylan)
* b4dbc862 Set application for OpenStack pools (Andy McCrae)
* ff906610 site: ability to only generate a ceph.conf on the machines (Sébastien Han)
* 22f843e3 default: define 'osd_scenario' variable (Sébastien Han)
* e537779b osd: fix osd restart when dmcrypt (Guillaume Abrioux)
* fff438fb Update Documentation example link to 3.0 (Grant)
* bdcc52b9 Check for docker sockets named after both _hostname or _fqdn (Giulio Fidente)
* a6d1922a mon: Fixed crush_rule_config for containerised deployment. (Greg Charot)
* 3b2f6c34 purge-docker: fix ceph-osd-zap name container (Guillaume Abrioux)
* dd0c98c5 common: do not use `shell` module when it is not needed (Guillaume Abrioux)
* deaf273b syntax: change local_action syntax (Guillaume Abrioux)
* b1a3c6e4 osd: resync group_vars file (Sébastien Han)
* 6f9dd26c config: remove any spaces in public_network or cluster_network (Sébastien Han)
* f372a423 purge: fix resolve parent device task (Guillaume Abrioux)
* 5132cc3d Do not search osd ids if ceph-volume (Sébastien Han)
* 481173f2 Add default for radosgw_keystone_ssl (Andy McCrae)
* f1232b33 Revert "monitor_interface: document need to use monitor_address when using IPv6" (Guillaume Abrioux)
* 93e9f372 config: add host-specific ceph_conf_overrides evaluation and generation. (Eduard Egorov)
* c7ec12d4 upgrade: skip luminous tasks for jewel minor update (Guillaume Abrioux)
* ec16cbdb defaults: avoid getting stuck (ceph --connect-timeout) (Guillaume Abrioux)
* 21931c54 docs for creating encrypted OSDs with the lvm scenario (Andrew Schoen)
* 79473bad ceph-osd: adds dmcrypt to the lvm scenario (Andrew Schoen)
* 965d2965 ceph-volume: adds a dmcrypt param to the ceph_volume module (Andrew Schoen)
* 5bf56425 ansible: set ssh retry option to 5 (Guillaume Abrioux)
* 9306a178 osds: change default value for `dedicated_devices` (Guillaume Abrioux)
* cfb75b8e tests: remove crush_device_class from lvm tests (Andrew Schoen)
* f88795e8 rgw: disable legacy unit (Sébastien Han)
* 8af74594 rolling update: add mgr exception for jewel minor updates (Sébastien Han)
* 55298fa8 purge-container: use lsblk to resolv parent device (Guillaume Abrioux)
* 58eb045d purge-container: remove awk usage in favor of blkid (Guillaume Abrioux)
* fb4a6dc9 docs for the crush_device_class option of lvm_volumes (Andrew Schoen)
* 64f57721 tests: adds crush_device_class to lvm tests (Andrew Schoen)
* 6cbb56a3 ceph-osd: adds the crush_device_class param to the lvm scenario (Andrew Schoen)
* 875e14ca ceph_volume: adds the crush_device_class param (Andrew Schoen)
* 752bf3e3 Makefile: handle "beta" Git tags (Ken Dreyer)
* 7d7080df crush: create rack type buckets and build crush tree according to {{ osd_crush_location }}. (Eduard Egorov)
* 6db4aea4 osd: skip devices marked as '/dev/dead' (Sébastien Han)
* 7ba25b20 ci: test on ansible 2.4.2 (Sébastien Han)
* 70401f95 container: trigger handlers on systemd file change (Guillaume Abrioux)
* b29a42cb handlers: avoid duplicate handler (Guillaume Abrioux)
* 8a19a833 container: restart container when there is a new image (Sébastien Han)
* 900f447c containers: fix bug when looking for existing cluster (Guillaume Abrioux)
* c2e04623 container: change the way we force no logs inside the container (Sébastien Han)
* acfbebe6 defaults: rename check_socket files for containers (Guillaume Abrioux)
* f0787e64 mon: use crush rules for non-container too (Sébastien Han)
* 97f520bc containers: bump memory limit (Sébastien Han)
* a8509fbc test: set UPDATE_CEPH_DOCKER_IMAGE_TAG for jewel tests (Andrew Schoen)
* b613321c switch-to-containers: do not fail when stopping the nfs-ganesha service (Andrew Schoen)
* 0b4b60e3 switch-to-containers: do not fail when stopping the ceph-mgr daemon (Andrew Schoen)
* 997edea2 rolling_update: do not fail the playbook if nfs-ganesha is not present (Andrew Schoen)
* 9c5e8ce7 doc: corrected a typo (Aviolat Romain)
* 0b55abe3 mon: always run ceph-create-keys (Sébastien Han)
* ad54e192 rgw: disable legacy rgw service unit (Sébastien Han)
* 895949d6 osd: fix check gpt (Guillaume Abrioux)
* c5b7b371 purge-cluster: clean some code (Guillaume Abrioux)
* eeedefdf purge-cluster: wipe disk using dd (Guillaume Abrioux)
* 39f2bfd5 fix jewel scenarios on container (Sébastien Han)
* c315f81d site-docker: ability to disable fact sharing (Sébastien Han)
* bbc79765 osd: best effort if no device is found during activation (Sébastien Han)
* 20078583 rolling_update: do not require root to answer question (Sébastien Han)
* dfbef836 nfs: fix package install for debian/suss systems (Sébastien Han)
* 50a848dc Rename fact docker_version to ceph_docker_version (Christian Berendt)
* 162b7d2b roles: ceph-mgr: Install the ceph-mgr package on SUSE (Markos Chandras)
* 15287c66 contrib: do not skip ci on backport (Sébastien Han)
* a24fd1cf client: don't make `osd_pool_default_pg_num` mandatory (Guillaume Abrioux)
* ab1dd302 client: don't try to generate keys (Guillaume Abrioux)
* 26afe46e docker: add missing condition for selinux tasks (Guillaume Abrioux)
* 7eaf4443 default: look for the right return code on socket stat in-use (Sébastien Han)
* 8cba4426 Add flags for OSD 'docker run --cpuset-{cpus,mems}' (John Fulton)
* a8a2c13f firewall: add mds, nfs, restapi and iscsi ports, remove 'configure_firewall' variable used for conditional * execution. Include the task only on rpm-based systems. (Eduard Egorov)
* 6a5e0da3 firewall: configure firewalld if it's already installed on the host (#2192). (Eduard Egorov)
* 73a20e9b Revert "tests: set CEPH_STABLE_RELEASE in ceph-build" (Guillaume Abrioux)
* 5676fa23 Convert interface names to underscores for facts (Major Hayden)
* d7dadc3e ceph-osd: respect nvme partitions when device is a disk. (Konstantin Shalygin)
* 6a9b5c96 defaults: fix CI issue with ceph_uid fact (Guillaume Abrioux)
* 788c3f35 ceph-osd: adds osd_objectstore to the name when using the ceph_volume module (Andrew Schoen)
* 15db3323 tests for the ceph_volume module (Andrew Schoen)
* 4b4680d1 refactor ceph_volume.py so it's easier to test (Andrew Schoen)
* 5e3d8dbf ceph-osd: use the cluster param with the ceph_volume module (Andrew Schoen)
* 7721aa37 ceph_volume: adds the cluster param (Andrew Schoen)
* 423166f6 ceph-osd: use the new ceph_volume module for the lvm scenario (Andrew Schoen)
* 61b4a1be adds a ceph_volume module (Andrew Schoen)
* a9981b41 Vagrantfile: Fixed repeated OSD controller creation (Prisacari Dmitrii)
* 0ea1811f Merge pull request #2226 from andymcc/gpt_mklabel (Sébastien Han)
* 4f1e854c Use parted module instead of command (Andy McCrae)
* e8338c87 Merge pull request #2211 from fultonj/admin-key-perms (Guillaume Abrioux)
* ffae2942 Set tighter permissions on keyrings when containerized (John Fulton)
* 29d21303 Merge pull request #2221 from ceph/fix_purge_waitfor (Sébastien Han)
* aaaf9801 purge: fix bug on 'wait_for' task (Guillaume Abrioux)
* b449b16e Merge pull request #2215 from squidboylan/support_loopback_devices (Guillaume Abrioux)
* f94b9040 Merge pull request #2214 from ceph/bz-1510555 (Sébastien Han)
* ef581f80 Merge pull request #2202 from ceph/remove_leftover (Sébastien Han)
* 7852fe21 Merge pull request #2212 from wintamute/master (Guillaume Abrioux)
* ebe0e602 Openstack: replaced hardcoded pool names with variables for openstack (nova) user (wintamute)
* 8f02bb00 Add support for using loopback devices as OSDs (Caleb Boylan)
* b26a8400 handlers: restart daemons only if docker is running (Guillaume Abrioux)
* d9cfe5f6 Merge pull request #2177 from jprovaznik/rados (Sébastien Han)
* d5399e8d Merge pull request #2207 from ceph/mds-debian (Sébastien Han)
* bb7b29a9 common: install ceph-common on all the machines (Sébastien Han)
* 2435c48c Allow to use rados for ganesha exports (Jan Provaznik)
* 3af03f0f Merge pull request #2185 from ceph/fix_purge-cluster (Guillaume Abrioux)
* 1cba6264 osd: remove leftover and fix a typo (Guillaume Abrioux)
* 947766e2 purge-cluster: remove usage of `with_fileglob` (Guillaume Abrioux)
* 387fd490 Merge pull request #2197 from ceph/fix_gpt_prepare (Sébastien Han)
* efe06be1 osd: ensure a gpt label is set on device (Guillaume Abrioux)
* 3c6f2854 Merge pull request #2189 from fultonj/empty-acl (Guillaume Abrioux)
* 3d4d71ad Merge pull request #2184 from ceph/fix_wildcard_remove (Guillaume Abrioux)
* d73f751b Make openstack_keys param support no acls list (John Fulton)
* f31d8557 Merge pull request #2182 from ceph/fix_reboot_rbd (Sébastien Han)
* b295e0a1 Merge pull request #2186 from ceph/dmcrypt-fixfg (Guillaume Abrioux)
* 932345ab osd: remove leftover from osd partition (Sébastien Han)
* b1c13223 osd: remove failed_when on activation (Sébastien Han)
* 80d3a242 osd: fix bad activation for dmcrypt (Sébastien Han)
* cc264d6b Merge pull request #2151 from hwoarang/add-opensuse (Sébastien Han)
* d9c1b610 purge-docker: remove osd disk prepare logs (Guillaume Abrioux)
* a98f1478 Merge pull request #2172 from ceph/lvm-raw-device (Sébastien Han)
* ccad0ebf rbd: enable ceph-rbd-mirror.target for releases <= luminous (Guillaume Abrioux)
* 17743f3d Merge pull request #2181 from yanyixing/fix_nfs_pkg (Guillaume Abrioux)
* 09724937 fix: remove the duplicated code (Yixing Yan)
* 28a158e7 Merge pull request #2174 from fultonj/chmod-facl-on-all-mon (Guillaume Abrioux)
* 6dc090a4 update group_vars/osds.yml.sample for the new lvm_volumes examples (Andrew Schoen)
* 3c604f11 lvm: support --data as a raw device or partition in ceph-volume (Andrew Schoen)
* 04f02910 lvm: ensure the data_vg exists before using it (Andrew Schoen)
* d65cbaa5 Set permissions and ACLs of OpenStack keys on all ceph-mons (John Fulton)
* fbb4d2ea Merge pull request #2170 from ceph/remove_osd_zap (Guillaume Abrioux)
* aa0b1ed1 tests: remove OSD_FORCE_ZAP variable from tests (Guillaume Abrioux)
* 5ea9a2dc Merge pull request #2165 from ceph/sync_ceph-build (Sébastien Han)
* 7a1d7d92 tests: set CEPH_STABLE_RELEASE in ceph-build (Guillaume Abrioux)
* c7aa109b vagrant_variables.yml.sample: Add openSUSE box (Markos Chandras)
* f8e3d4bb ceph-docker-common: Add support for openSUSE Leap distributions (Markos Chandras)
* 8c321b84 ceph-nfs: Add support for openSUSE Leap distributions (Markos Chandras)
* 173959cf ceph-rgw: Add support for openSUSE Leap distributions (Markos Chandras)
* a868c52f ceph-restapi: Add support for openSUSE Leap distributions (Markos Chandras)
* ddb468bf ceph-rbd-mirror: Add support for openSUSE Leap distributions (Markos Chandras)
* fb469503 ceph-osd: Add support for openSUSE Leap distributions (Markos Chandras)
* 34a40adc ceph-mon: Add support for openSUSE Leap distributions (Markos Chandras)
* f944ee39 ceph-mgr: Add support for openSUSE Leap distributions (Markos Chandras)
* 8135638c ceph-mds: Add support for openSUSE Leap distributions (Markos Chandras)
* c6103a0f ceph-fetch-keys: Add support for openSUSE Leap distributions (Markos Chandras)
* 3e4a7c8b ceph-config: Add support for the openSUSE Leap distributions (Markos Chandras)
* 211b0c33 ceph-client: Add support for the openSUSE Leap distributions (Markos Chandras)
* e06c1084 ceph-agent: Add support for the openSUSE Leap distributions (Markos Chandras)
* dd6ee725 ceph-common: Don't check for ceph_stable_release for distro packages (Markos Chandras)
* 84978696 ceph-common: Add initial support for openSUSE Leap distributions (Markos Chandras)
* 5cdbb08d Merge pull request #2167 from ceph/bz-1510906 (Sébastien Han)
* 44df3f91 defaults: fix rgw restart script in handlers (Guillaume Abrioux)
* 0369bd59 Merge pull request #2146 from mslovy/wip-fix-crush-location (Guillaume Abrioux)
* 21a66bc5 Merge pull request #2140 from yanyixing/doc_fix (Sébastien Han)
* 68566444 Merge pull request #2142 from squidboylan/master (Sébastien Han)
* 7b0743be Merge pull request #2144 from ceph/quick_fix_lvm (Sébastien Han)
* 17d1ff61 Merge pull request #2141 from Arano-kai/run_restart_scripts_in_noexec_tmp (Sébastien Han)
* 37d35ef6 Merge pull request #2163 from ktdreyer/rpm-ansible-2.4.1.0 (Guillaume Abrioux)
* 3c999b31 rpm: require ansible 2.4.1.0 (Ken Dreyer)
* afd7c811 Merge pull request #2152 from ceph/bz-1510470 (Guillaume Abrioux)
* c06faf2d Merge pull request #2154 from ceph/fix_auto_discover (Guillaume Abrioux)
* a695b2c0 Merge pull request #2153 from ceph/fix_disk_list_test (Guillaume Abrioux)
* fa675f2e purge-docker-cluster: ensure old logs are removed (Guillaume Abrioux)
* 591d7722 osd: always run disk_list test (Guillaume Abrioux)
* 4c2d98f1 Merge pull request #2150 from ceph/fix_typo (Guillaume Abrioux)
* 43975a73 osd: avoid using non desired loop device in autodiscovery (Guillaume Abrioux)
* 80d32dec config: fix config generation (Guillaume Abrioux)
* b9ee96b5 Merge pull request #2145 from ceph/fix-autodiscover (Guillaume Abrioux)
* d5dfc63c osd: fix automatic prepare when auto_discover (Guillaume Abrioux)
* d82a09dd fix crush location for non-containerized deployment (yaoning)
* 0930f149 osd: do not use dm when osd_auto_discovery (Sébastien Han)
* 238754a8 osd: skip some set_fact when osd_scenario=lvm (Guillaume Abrioux)
* ef9635ca Merge pull request #2143 from ceph/fix_typo (Guillaume Abrioux)
* 39b584e5 osd: fix a typo in roles/ceph-osd/defaults/main.yml (Guillaume Abrioux)
* 41d10a2f infra: fix take-over-existing-cluster.yml playbook (Caleb Boylan)
* 5cde3175 FIX: run restart scripts in `noexec` /tmp (Arano-kai)
* 7d239b69 fix the ansible version for the stable-3.0 branch (Yixing Yan)
* 76d9c8e5 Merge pull request #2128 from ceph/mon_interface (Sébastien Han)
* 963d76cd Merge pull request #2129 from ceph/update_nightly_ci (Sébastien Han)
* d4ed9a20 osd: enhance backward compatibility (Sébastien Han)
* de0900ea tests: sync with ceph/ceph-build for ceph-ansible-nightlies (Guillaume Abrioux)
* ab7eb792 config: fix monitor_interface when not passed in the inventory file (Sébastien Han)
* d0520623 Merge pull request #2124 from ceph/lvm-setup-fix (Sébastien Han)
* 4f7223d5 Merge pull request #2123 from ceph/update_tests (Sébastien Han)
* 4596fbaa common: make the delegate_facts feature optional (Guillaume Abrioux)
* 37a48209 test: when creating the /dev/sdc2 partition specify label as gpt (Andrew Schoen)
* 4cbda668 Merge pull request #2122 from jprovaznik/template (Sébastien Han)
* 635fe381 contrib: skip ci and hightlight origin PR (Sébastien Han)
* 589cd27c Include ganesha dbus config file (Jan Provaznik)
* c28882c1 tests: add missing test for rbd (Guillaume Abrioux)
* c9c278de docs: update patterns containing version number (Guillaume Abrioux)
* 97b1cb02 tests: followup on testing against ansible2.4 (Guillaume Abrioux)
* b3c9de90 Merge pull request #2090 from ceph/ansible-2.4 (Sébastien Han)
* faccd0ac Merge pull request #2100 from ceph/lvm-bluestore (Sébastien Han)
* 429622dd docs add lvm bluestore examples (Alfredo Deza)
* 517a2b3f ceph-osd skip lvm creation if they are already in use (Alfredo Deza)
* c4ad2477 Test ansible 2.4.1 (Sébastien Han)
* 6ea92756 Merge pull request #2117 from ceph/rm-dup (Sébastien Han)
* a50b6a94 Merge pull request #2118 from ceph/typo-purge (Sébastien Han)
* 473673ab shrink-mon: fix typo in the code doc (Sébastien Han)
* d2575c7f default: remove dup variable (Sébastien Han)
* d6a0d2f9 Merge pull request #2071 from jtaleric/master (Sébastien Han)
* 5a10b048 Merge pull request #2105 from major/really-fix-always-run (Sébastien Han)
* 787e54f7 Merge pull request #2110 from fultonj/issue/2092 (Guillaume Abrioux)
* ae156e9f Make acls and mode parameters of opentack_keys optional (John Fulton)
* fdd6a468 Merge pull request #2112 from ceph/remove-optional (Sébastien Han)
* 2837d0a2 purge: do not reboot by default (Sébastien Han)
* ab587642 Docker image pull retry (Joe Talerico)
* 5f9e50da Merge pull request #2103 from andymcc/tcmalloc_settings (Sébastien Han)
* 613b6a30 Merge pull request #2104 from ceph/rgw-section (Sébastien Han)
* 07e2a783 Merge pull request #2084 from ceph/backward-osd-2.4 (Sébastien Han)
* f73232ca Use check_mode instead of always_run (Major Hayden)
* c2b5118c Revert "Avoid deprecated always_run" (Major Hayden)
* 8670b45e rgw/nfs: fix section duplication (Sébastien Han)
* 7f6c3910 Option to set TCMALLOC_MAX_TOTAL_THREAD_CACHE_BYTES (Andy McCrae)
* d3b427e1 ceph-osd lvm scnearios are no longer limited to filestore (Alfredo Deza)
* df05e63c ceph-osd use --cluster in ceph-volume calls (Alfredo Deza)
* 628d98a9 ceph-osd add the CEPH_VOLUME_DEBUG env var to all ceph-volume commands (Alfredo Deza)
* f0364ba4 tests add the bluestore scenario in tox.ini (Alfredo Deza)
* 027d57dd tests create a bluestore osd scenario (Alfredo Deza)
* f77180cf group_vars: update the examples in lvm for bluestore support (Alfredo Deza)
* b89309e2 ceph-osd update the examples in defaults for lvm bluestore (Alfredo Deza)
* bbc36722 ceph-osd: lvm support for bluestore (Alfredo Deza)
* de99f9fb Merge pull request #2086 from ceph/followup (Sébastien Han)
* f2185965 Merge pull request #2102 from yanyixing/fix_miss_word (Guillaume Abrioux)
* b6296c13 update sample file (Yixing Yan)
* f90f2f3a purge: containers are not stopped (Guillaume Abrioux)
* 049729b8 Merge pull request #2097 from fultonj/issue/2095 (Sébastien Han)
* 751da93b Merge pull request #2096 from andymcc/regex_defaults (Sébastien Han)
* 7a7ddab6 Require osd_scenario parameter to be provided in containerized deploy (John Fulton)
* 280de304 tests: split purge_cluster, followup on a53aa9e (Guillaume Abrioux)
* 394b1a8c Merge pull request #2093 from andymcc/typo_fix (Sébastien Han)
* 9ebef8ba Add regexp check for setting CLUSTER_NAME (Andy McCrae)
* 05a1f965 Typo fix for radosgw@ systemd file (Andy McCrae)
* 2bc58684 Merge pull request #2054 from jprovaznik/bindaddr (Sébastien Han)
* 291e6b60 ceph-nfs - add bind address variable (Jan Provaznik)
* 968ef043 osd: bring backward compatibility with old Jewel images (Sébastien Han)
* 54de2efc Merge pull request #2082 from ceph/restapi-cephconf (Sébastien Han)
* 8016d5d1 Merge pull request #2076 from ceph/2.4-3.0-backward (Sébastien Han)
* 4413511b all: backward compatibility between stable-2.2 and 3.0 (Sébastien Han)
* fccb9472 mgr: force module addition (Sébastien Han)
* ba5c6e66 common: move restapi template to config (Sébastien Han)
* 5b1087f1 mgr: play 'enable modules' sequence only on luminous (Guillaume Abrioux)
* 98232637 upgrade: fix upgrade jewel to luminous for nfs nodes (Guillaume Abrioux)
* 70034451 upgrade: fix upgrade jewel to luminous for mgr nodes (Guillaume Abrioux)
* acbdb7f4 Merge pull request #2081 from ceph/fix_mgr_upgrade (Sébastien Han)
* db6b93d4 tests: only test upgrade jewel > luminous (Guillaume Abrioux)
* 93f08567 tests: re-add missing param in tox (Guillaume Abrioux)
* c5275155 Merge pull request #2000 from ceph/merge-osd-scenarios (Sébastien Han)
* f047ad15 Merge pull request #2075 from ceph/fix_3a58757 (Sébastien Han)
* ff228e2d mgr: fix broken task on jewel (Guillaume Abrioux)
* 1579f1c5 Merge pull request #2073 from ceph/fix_rbd_handler (Sébastien Han)
* c2850b11 rbd: fix restart script for jewel (Guillaume Abrioux)
* 2936d152 Merge pull request #2053 from Fbrachere/mgr-modules (Sébastien Han)
* a53aa9e8 ci: new osd scenarios (Sébastien Han)
* 6320f3aa Merge pull request #2068 from ceph/fix-collocation2 (Sébastien Han)
* 90b75185 defaults: fix handlers for collocation (Sébastien Han)
* 897136b3 Merge pull request #2065 from ceph/rhcs-rm (Sébastien Han)
* 013bc645 Merge pull request #2050 from ceph/sort_dict (Sébastien Han)
* 2aa53fb0 Merge pull request #2055 from ceph/update-mirror-nfs (Guillaume Abrioux)
* 1cf39df5 Merge pull request #2062 from berendt/remove-readme-files-in-roles-directories (Sébastien Han)
* c72ddee2 rpm: remove ability to install ceph community version (Sébastien Han)
* 4c380c9e Cleanup readme files in roles directories (Christian Berendt)
* b511b867 Merge pull request #2064 from berendt/sphinx-conf-do-not-set-release-version (Sébastien Han)
* 55de29ab Merge pull request #2063 from berendt/docs-index-syntax-issue (Sébastien Han)
* 9a1e789a Add missing backticks in docs index (Christian Berendt)
* 61113848 Do not set release/version in sphinx configuration (Christian Berendt)
* d920d483 upgrade: support for rbd mirror and nfs (Sébastien Han)
* 39bf102b switch: nicer way to check mon quorum (Sébastien Han)
* ddb878d9 Merge pull request #2057 from berendt/gh2056 (Sébastien Han)
* cf901f01 In docker start scripts replace \u00a0 with \u0020 (Christian Berendt)
* 3a587575 Add ability to enable ceph mgr modules. (Fabien Brachere)
* 7ee9aa94 Merge pull request #1963 from ceph/pull-in-para (Guillaume Abrioux)
* 46774207 Merge pull request #2051 from ceph/mds-fs (Guillaume Abrioux)
* af10fc87 Merge pull request #2052 from ceph/fix-contriub-tag (Sébastien Han)
* d5358bd2 contrib: galaxy fix the array (Sébastien Han)
* ec042219 ceph-defaults: fix handlers that are always triggered (Guillaume Abrioux)
* 71d81962 mds: fix fs pool creation (Sébastien Han)
* 90ce4276 ci: use a container client VM (Sébastien Han)
* b34a04ea site-docker.yml try to fetch images in // (Sébastien Han)
* 80c62e05 Merge pull request #2045 from ceph/reboot (Guillaume Abrioux)
* 7d4b3f99 Merge pull request #2047 from ceph/enable_ceph-rbd-mirror.target (Guillaume Abrioux)
* f7832e5e Merge pull request #2031 from major/simplify-ntp (Sébastien Han)
* 3e058bff ci: reboot with ansible instead of vagrant reload (Sébastien Han)
* 59ca1065 rbd-mirror: enable ceph-rbd-mirror.target (Guillaume Abrioux)
* 73f6aeb1 Merge pull request #2039 from major/enable-profile-tasks-callback (Sébastien Han)
* b685acee Merge pull request #2044 from major/avoid-jinja-in-when (Sébastien Han)
* a1c76e83 Simplify NTP checks/install (Major Hayden)
* 9c3d749f Merge pull request #2038 from major/fix-cmd-warning (Sébastien Han)
* c233c874 Enable profile_tasks callback plugin (Major Hayden)
* c0185132 Remove jinja2 delimiters from `when` keys (Major Hayden)
* 17623a21 Merge pull request #2036 from ceph/cephfs-pool (Guillaume Abrioux)
* 6bd152d5 Merge pull request #2037 from major/remove-always-run (Sébastien Han)
* c6210fa8 Merge pull request #2028 from ceph/fix_testinfra (Sébastien Han)
* b49f9bda mds: precisely define cephfs pool (Sébastien Han)
* 33b200d4 Suppress yum/dnf/rpm command warnings (Major Hayden)
* 620fb37d Avoid deprecated always_run (Major Hayden)
* a179e312 tests: add missing override for collocation scenario (Guillaume Abrioux)
* 002b0341 Merge pull request #2035 from ceph/replace-disk (Sébastien Han)
* 13bce287 infra: replace osd playbook (Sébastien Han)
* 739a41ae Merge pull request #2030 from major/ceph-common-pass-pkgs-as-list (Sébastien Han)
* a2880e63 tests: rbd/rgw adapt testinfra for jewel (Guillaume Abrioux)
* 4afd51c1 Merge pull request #2029 from ceph/rgw-jinja (Sébastien Han)
* 9d626303 Pass list of packages instead of with_items (Major Hayden)
* aa70b07a config: proper render ceph.conf when doing collocation (Sébastien Han)
* b561252d Merge pull request #2027 from ceph/hub-backport (Sébastien Han)
* 155dd362 contrib: backport auto create PR (Sébastien Han)
* 4afc4000 Merge pull request #2026 from ceph/hub-backport (Sébastien Han)
* 32625c5e contrib: backport auto create PR (Sébastien Han)
* f50b170a Merge pull request #2022 from ceph/fix-purge-iscis (Sébastien Han)
* 81c04b64 Merge pull request #2021 from major/remove-duplicate-package-key (Sébastien Han)
* d0a9e57b osd: rollback bindmount of /run/udev (Sébastien Han)
* 85e13a86 purge-iscsi: fix group name (Sébastien Han)
* 10e1d464 Remove duplicate 'package' key (Major Hayden)
* f6d1be26 Merge pull request #2015 from ceph/fix_nfs-ganesha-repos (Sébastien Han)
* 5dc9c640 nfs: add missing condition for debian_rhcs (Guillaume Abrioux)
* 90d4ac5d Merge pull request #2020 from jprovaznik/dexports (Sébastien Han)
* 87b1da09 Ceph-nfs dynamic exports fixes (Jan Provaznik)
* fbd1a57b iscsi-gw: move repository configuration to ceph-iscsi-gw (Guillaume Abrioux)
* ea7a8fb8 Docs: fix error `Unknown target name` (Guillaume Abrioux)
* c4dcdaa2 nfs: move repository configuration in ceph-nfs role (Guillaume Abrioux)
* a10f1295 Merge pull request #2018 from ceph/purge-journal (Sébastien Han)
* 24b82c26 purge: fix journal purge (Sébastien Han)
* f147b119 Merge pull request #2014 from ceph/fixes-2 (Guillaume Abrioux)
* 9e8204d9 nfs: move packages installation to own role (Guillaume Abrioux)
* 3c64abe0 mds: move installation packages in role itself (Guillaume Abrioux)
* 4032f102 iscsi: move package install to ceph-iscsi-role (Sébastien Han)
* 1581a1c0 mgr: move installation packages in role itself (Guillaume Abrioux)
* a1ea6e7f tests: adapt current testing for collocation scenario (Guillaume Abrioux)
* 88a37ca9 ci: disable vnc console (Sébastien Han)
* bf99751c osd: bindmount /run/udev (Sébastien Han)
* 6d7b73fa ci: re-add osd_pool_default_size to 1 with the override (Sébastien Han)
* e15302c2 tox: decrease sleep to 2min instead of 5. (Sébastien Han)
* 450108fa infra: add independant purge-iscsi-gateways.yml (Sébastien Han)
* 1bd89123 config: do not duplicate sections when doing collocation (Sébastien Han)
* 774697eb infra: use the pg check in the right place (Sébastien Han)
* a3e7bcb1 Merge pull request #2013 from ceph/wip-purge-cluster (Sébastien Han)
* 88cb5683 Merge pull request #2011 from ceph/switch-pg (Sébastien Han)
* 33a3aa0d switch: check pgs only when num_pgs > 0 (Sébastien Han)
* 7054abef Merge pull request #2009 from ceph/fix-clean-pg (Sébastien Han)
* 9f1bd3d6 handler: add serial restart back (Sébastien Han)
* abb8c374 ci: use by-id instead of by-path (Sébastien Han)
* 05f26031 rolling_update: perform pg check when pgs_num > 0 (Sébastien Han)
* a4dcef73 common: fix debian rhcs installation (Sébastien Han)
* c3c63ae5 switch: rework and fix clean pg wait (Sébastien Han)
* c693e95c purge-docker: rework device detection (Sébastien Han)
* 2fb4981c shrink-osd: admin key not needed for container shrink (Sébastien Han)
* 64e272d8 purge-cluster: Do not use shell for rm (Boris Ranto)
* f696cb76 purge-cluster: Do not fail on systemd commands (Boris Ranto)
* ac29e8f9 Merge pull request #1983 from jprovaznik/suffix (Sébastien Han)
* 5d39f378 Merge pull request #1984 from jprovaznik/exportdir (Sébastien Han)
* 9a46ed8b Merge pull request #2010 from ceph/wip-nfs-set-rgw-key-permissions (Sébastien Han)
* 28862a99 nfs: missing conditional for setting rgw key permissions (Ali Maredia)
* 11f51df1 Merge pull request #2005 from ceph/wip-nfs-export-id (Sébastien Han)
* 779f642f use get to check stdout_lines (Sébastien Han)
* d5ae0a33 handler: do not test if pgs_num = 0 (Sébastien Han)
* e3ba5e2f Merge pull request #2006 from ceph/fix_jewel_nightly (Guillaume Abrioux)
* 6b027557 osd: fix `set_fact build dedicated_devices` (Guillaume Abrioux)
* 680ec875 tests: skip tests for nfs nodes when release is jewel (Guillaume Abrioux)
* d363b0f7 rbd: fix bug when trying to fetch key (Guillaume Abrioux)
* 3c16af5e Allow to override systemd service instance id (Jan Provaznik)
* 0c09cd3e nfs: config var changes (Ali Maredia)
* 1121a840 Merge pull request #2003 from ceph/debian-iso (Sébastien Han)
* feaf5ff9 common: iso install on Debian is supported by rhcs (Sébastien Han)
* a155c198 Merge pull request #2004 from ceph/debian-url (Sébastien Han)
* 425ecb3c common: fix ga verison for debian rhcs (Sébastien Han)
* 639389b9 Merge pull request #1985 from ceph/debian-rhcs (Sébastien Han)
* 0d833657 Merge pull request #2001 from ceph/iscsi (Sébastien Han)
* 530bf5d1 Merge pull request #2002 from ceph/non-col (Sébastien Han)
* 29888649 osd: do not do unique on dedicated_devices (Sébastien Han)
* 9193e888 common: fix rhcs installation on debian (Sébastien Han)
* b6b24a5c iscsi: fix wrong group name for iscsi (Sébastien Han)
* 29c90ca3 Merge pull request #1957 from ceph/multi_env_test (Sébastien Han)
* 9304bb6c Merge pull request #1997 from rrmichel/osd_fragment (Sébastien Han)
* 164c77ac Merge pull request #1995 from ceph/remove-rbd-check (Sébastien Han)
* dded5f54 tests: set `volume_cache` 'unsafe' (Guillaume Abrioux)
* 53a69640 tests: disable shared folder (Guillaume Abrioux)
* 6aa7050a tests: make all subnet uniq per scenario (Guillaume Abrioux)
* 8f75eac6 Merge pull request #1999 from ceph/bz-1486062 (Sébastien Han)
* 8fb68297 common: remove unusuable conditions (Guillaume Abrioux)
* c803dede Merge pull request #1993 from jprovaznik/log (Sébastien Han)
* b462b68e Fixing path to osd_fragment.yml (Michel Rode)
* b8916ecb Include exports dir in ceph-nfs config file (Jan Provaznik)
* b545080d Merge pull request #1988 from ceph/fix_keyrings (Sébastien Han)
* bbf6bebe jewel: remove rbd check (Sébastien Han)
* 62ea6f6e Fix bind mount for /var/lib/nfs/ganesha directory (Jan Provaznik)
* 635111bf tests: add ceph-override.json for ubuntu/cluster (Guillaume Abrioux)
* 85e012fc Merge pull request #1992 from jprovaznik/pool (Sébastien Han)
* 4135091c tests: fix broken osd test for xenial_cluster (Guillaume Abrioux)
* 43e57abf Evaluate cephfs pool variables (Jan Provaznik)
* 70e2787f docker: fix keyrings copied on all nodes (Guillaume Abrioux)
* 163c87af Merge pull request #1976 from ceph/rbd_pool (Sébastien Han)
* f0fd3aae tests: increase number of threads for testinfra (Guillaume Abrioux)
* cdb5023d tests: fix brokens tests for mds (Guillaume Abrioux)
* 8fac8f54 iscsi-gw: Create a rbd pool if it doesn't exist (Guillaume Abrioux)
* 2c4258a0 Refact code for set_osd_pool_default_* (Guillaume Abrioux)
* 6aca67bc Only perform actions on the rbd pool after it has been created (Al Lau)
* ee8aa8bf Merge pull request #1986 from ceph/fixes (Sébastien Han)
* cac7d034 defaults: fix check socket non-container handler (Sébastien Han)
* f146829e Merge pull request #1953 from ceph/colocation (Sébastien Han)
* c751c2dc nfs: add run once to user creation (Sébastien Han)
* 784cc73d set docker_exec_cmd fact early in each role (Guillaume Abrioux)
* 5968cf09 ci: add collocation scenario (Sébastien Han)
* f92eaea0 Merge pull request #1977 from ktdreyer/doc-master-ansible-version (Sébastien Han)
* a5a9c64e Merge pull request #1978 from ktdreyer/doc-installing-ansible (Sébastien Han)
* f37e014a Merge pull request #1974 from ceph/mgr-upgrade-luminous (Sébastien Han)
* a1273f3d docs: add instructions for installing Ansible (Ken Dreyer)
* 07edf7e3 docs: master requires ansible 2.3.1 (Ken Dreyer)
* 0ce76113 Merge pull request #1956 from ceph/osd-container-id (Sébastien Han)
* 5a7204d2 Merge pull request #1975 from ceph/nfs-site (Sébastien Han)
* 99466e79 upgrade: a support for mgrs (Sébastien Han)
* 27808a64 iscsi: fix when condition (Sébastien Han)
* b47c4fd1 site: always play ceph-defaults and ceph-docker-common (Sébastien Han)
* 3bd341f6 osd: container use id instead of dev name (Sébastien Han)
* 18e2ab4d test: add handler support (Sébastien Han)
* ba428945 osd: do not copy admin key on collocated scenario (Sébastien Han)
* 39ee2563 test: add test for device with 'by-path' (Sébastien Han)
* 91e2a0b4 Merge pull request #1973 from ceph/refact_ceph-defaults (Sébastien Han)
* 081f2261 defaults: change running order in main.yml (Guillaume Abrioux)
* 30ce781c Merge pull request #1968 from ceph/bz-1488999 (Sébastien Han)
* 3c2c31a5 Merge pull request #1964 from vatelzh/master (Sébastien Han)
* 62770cd7 refact MDS role (Guillaume Abrioux)
* 0e5e7dc4 Merge pull request #1971 from ceph/expose-part (Sébastien Han)
* 46a01df4 osd: add cluster name support (Sébastien Han)
* 0da6d8e3 Merge pull request #1967 from ceph/use_systemd_module (Sébastien Han)
* de44f125 Merge pull request #1939 from ceph/ci-reboot (Sébastien Han)
* 466f6f35 Use systemd module instead of service. (Guillaume Abrioux)
* b9050d62 update: fix var register (Sébastien Han)
* 86a6db0d purge-cluster: delete block partitions if using bluestore (zhangwentao)
* ca76c469 site: only support nfs on luminous and above (Sébastien Han)
* 083c53c6 ci: run purge cluster on centos not ubuntu (Sébastien Han)
* e121bc58 defaults: add missing handlers for rbd mirorr and mgr (Sébastien Han)
* 048b55be defaults: only run socket checks on their specific roles (Sébastien Han)
* 341c9e07 nfs: fix container setup and re-arrange files (Sébastien Han)
* b4bec524 tests: add tests for rgw-nfs (Sébastien Han)
* fc29ccd0 rbd-mirror: force sercice enable ceph-rbd-mirror.target (Sébastien Han)
* e113d94c tests: implement reboot after a deployment (Sébastien Han)
* deb5d3ba Merge pull request #1962 from ceph/fix_mgr_sestatus (Sébastien Han)
* 913ad537 docker: add condition to run selinux tasks only on rhel os family (Guillaume Abrioux)
* 0e817ce1 Merge pull request #1959 from ceph/update-check (Sébastien Han)
* 38e6ae7c Merge pull request #1961 from ceph/site-condition-2 (Sébastien Han)
* b869a7ae site: s/ceph_stable_release/ceph_release (Sébastien Han)
* 1de77654 Merge pull request #1960 from ceph/site-condition (Sébastien Han)
* 273d26bc site: fix condition (Sébastien Han)
* a0a5b174 rolling_update: clarify mon quorum command (Sébastien Han)
* 07ad6bcd Merge pull request #1958 from ceph/update-luminous (Sébastien Han)
* bd5471b9 update: complete luminous upgrade (Sébastien Han)
* 77fc8ba8 Merge pull request #1931 from ceph/re-enable-iscsi (Sébastien Han)
* 67c78da0 iscsi: re-enable the scenario (Sébastien Han)
* 68f1f99e update: nicer way to wait for clean pgs (Sébastien Han)
* 00109794 Merge pull request #1641 from fullerdj/wip-djf-key-timeout (Sébastien Han)
* b721c4e9 Merge pull request #1955 from ceph/fix_syntax (Sébastien Han)
* d20dc542 docker-common: fix wrong syntax (Guillaume Abrioux)
* 9bcbf748 mon/ceph_keys: Add timeout flag to ceph-create-keys (Douglas Fuller)
* 254c12b0 Merge pull request #1916 from ceph/purge-cluster-fix (Andrew Schoen)
* fccc604f purge-cluster: default lvm_volumes if not defined (Andrew Schoen)
* 39535dd5 Merge pull request #1545 from ceph/wip-rgw-test (Sébastien Han)
* 8b0a0b2e Merge pull request #1949 from ceph/wip-rhcs-cdn-validation (Sébastien Han)
* 70b321f3 ceph-common: Fix logic for ceph_repository_type (Zack Cerza)
* ae18cf24 test: add test making sure rgw http endpoints are enabled (Ali Maredia)
* e4ac7360 Merge pull request #1943 from ceph/mgr-site (Sébastien Han)
* 4266bb5d Merge pull request #1933 from ceph/osd-container-reboot (Sébastien Han)
* 8b6456dc handler: enhance socket detection (Sébastien Han)
* 69aadbb8 Merge pull request #1947 from ceph/purge_mgr (Sébastien Han)
* 45797ab9 osd: fix container reboot (Sébastien Han)
* fcb6454e rbd-mirror: fix systemd unit in purge-docker (Guillaume Abrioux)
* c80ba7a3 purge: implement mgr purge (Guillaume Abrioux)
* 4006a387 Merge pull request #1948 from ceph/fix_rgw_update (Sébastien Han)
* 7195b087 update: update rgw systemd unit name (Guillaume Abrioux)
* c6de5b13 Merge pull request #1946 from ceph/fix_bug_collocation (Sébastien Han)
* be757122 config: fix path to set `interface` in ceph.conf (Guillaume Abrioux)
* f3851df0 Merge pull request #1940 from ceph/rgw-interface (Sébastien Han)
* 595be95d Merge pull request #1945 from ceph/mgr-siteuh (Sébastien Han)
* 8f71c08e handler: display ceph status properly (Sébastien Han)
* d5bfc6f8 mgr: always bootstrap mgr right after the mon (Sébastien Han)
* 1ea3ec17 Merge pull request #1942 from ceph/nfs-again (Sébastien Han)
* 2e0c2928 nfs: fix docker_exec_cmd_nfs default value (Sébastien Han)
* 4a550859 config: fix rgw interface when using different interfaces (Sébastien Han)
* 134ddc82 Merge pull request #1941 from ceph/nfs-fix (Sébastien Han)
* 64824baa nfs: fix undefined variable (Sébastien Han)
* 839bc11d Merge pull request #1923 from ceph/nfs-container (Sébastien Han)
* aa5c36f1 nfs: several fixes (Sébastien Han)
* 59535522 Merge pull request #1934 from ceph/fix_debian_install (Sébastien Han)
* 599429dd common: fix debian install (Guillaume Abrioux)
* c7d9838a  tests: add nfs container test (Sébastien Han)
* 16174a39 Merge pull request #1872 from ceph/ci-rbd-mirror (Sébastien Han)
* a069a6fe tests: temporary disable `test_nfs_rgw_fsal_export` (Guillaume Abrioux)
* b8c3fa97 nfs: change ownership on /var/log/ganesha (Guillaume Abrioux)
* 1886a69b docker-common: refact `stat_ceph_files.yml` (Guillaume Abrioux)
* 62cd0bae rbd: fix missing keyring on nodes (Guillaume Abrioux)
* 295c1b06 docker-common: fix ceph_health check (Guillaume Abrioux)
* 6c9f3a08 rgw: refact start_docker_rgw.yml (Guillaume Abrioux)
* f4fc3bbf ci: add precise tests to valide daemons are up (Guillaume Abrioux)
* 90c4066c mgr: add missing admin key for mgr container (Guillaume Abrioux)
* 23eed1f9 Merge pull request #1917 from ceph/shrking-container (Sébastien Han)
* c08ca514 Merge pull request #1930 from ceph/filestore-osd-section (Sébastien Han)
* adf50179 config: remove max open file (Sébastien Han)
* a4baed10 config: no not generate osd section if bluestore (Sébastien Han)
* e87d5fd4 Merge pull request #1929 from ceph/ceph-conf (Guillaume Abrioux)
* cb051726 docker: we don't need to copy the ceph.conf on all the nodes (Sébastien Han)
* 6bac6136 shrink: support for container (Sébastien Han)
* 7aab1336 Merge pull request #1920 from jprovaznik/ganesha (Sébastien Han)
* a89363b0 Merge pull request #1926 from ceph/rhcs-debina (Sébastien Han)
* 75e77f59 common: fix rhcs debian install (Sébastien Han)
* c5ed5143 Merge pull request #1925 from ceph/wip-nfs-config-changes (Sébastien Han)
* 3ba1a68c nfs: ganesha.conf template fixes (Ali Maredia)
* 9aa139b4 Merge pull request #1918 from ceph/fix-rhcinstall (Sébastien Han)
* dd7f21bd common: fix rhcs installation and rgw package for nfs (Sébastien Han)
* 87e2dae9 Merge pull request #1919 from ceph/iscsi-check (Sébastien Han)
* ace97e87 Merge pull request #1904 from ceph/name-include-fact (Sébastien Han)
* 8c510ab9 Make ceph-nfs service enablement/start optional (Jan Provaznik)
* dbe64f66 common: fix rhel check (Sébastien Han)
* 773010ee Merge pull request #1911 from fghaas/1910 (Sébastien Han)
* ada2f147 Introduce ceph_nfs_ceph_user (Florian Haas)
* d100b4e5 name includes and set_fact for clarity (Sébastien Han)
* 66d41f34 Merge pull request #1889 from ceph/client-containers (Sébastien Han)
* 2749368a Merge pull request #1915 from ceph/state-leftover (Sébastien Han)
* aa5d94fc docker-common: re-introduce state for leftover files (Sébastien Han)
* 1b468176 Merge pull request #1900 from ceph/rpm-all-yaml (Sébastien Han)
* 85d73e3b client: ability to create keys and pool with no cpeh binaries (Sébastien Han)
* 7fedc8eb Merge pull request #1891 from ceph/clarify-update (Sébastien Han)
* 68a1390d Merge pull request #1898 from ceph/restart-mon (Sébastien Han)
* ec4453b6 Merge pull request #1901 from ceph/rpm-ansible-2.3 (Sébastien Han)
* 3f90a67a rpm: require Ansible 2.3.1.0 (Ken Dreyer)
* cf945d5a rpm: ship rhcs.yaml.sample as all.yml.sample on RHEL (Ken Dreyer)
* 8b7c83c3 Merge pull request #1899 from ceph/rpm-obsoletes-iscsi (Sébastien Han)
* 05c7fcea rpm: Obsoletes ceph-iscsi-ansible (Ken Dreyer)
* 3321b935 Merge pull request #1895 from ceph/rhcs-on-rhel (Sébastien Han)
* ed3003cf defaults: restart docker daemon higher delay (Sébastien Han)
* fcb0a01e Merge pull request #1894 from ceph/mgr-version (Andrew Schoen)
* 93bd78ee rpm: ship different yml samples on RHEL vs CentOS (Ken Dreyer)
* fb02b1d9 mon: create the mgr key for release >= luminous (Sébastien Han)
* 0d3b1b8d Merge pull request #1893 from ceph/rgw-socker (Sébastien Han)
* 5eff7e24 Merge pull request #1890 from ceph/lvm-setup (Andrew Schoen)
* 6f0b1fe8 rgw: remove old variables (Sébastien Han)
* 660893e7 osd: add meaningful message for journal_size (Sébastien Han)
* fe1d84d3 Merge pull request #1892 from ceph/purge-dmcrypt-col (Sébastien Han)
* ef8d37dd Merge pull request #1800 from ceph/wip-osd-start-fix (Sébastien Han)
* ba3e3b6c purge: only purge specific directories for mon (Sébastien Han)
* 82c4848e Merge pull request #1885 from ceph/shrink-osd (Sébastien Han)
* 92f9be96 rolling_update: clarify update doc (Sébastien Han)
* 3031e517 shrink-osd: fix when multiple osds (Sébastien Han)
* 2f51f0de Merge pull request #1880 from ceph/wip-rgw-nfs (Sébastien Han)
* 57f2ad7e tests: delete journal partitions in lvm_setup.yml (Andrew Schoen)
* f67b47d0 Merge pull request #1882 from ceph/multi-journal (Sébastien Han)
* 911fa201 Merge pull request #1888 from ceph/make-srpm-rpmbuild (Sébastien Han)
* 323d59b7 Makefile: remove fedpkg dependency for "srpm" (Ken Dreyer)
* ac624376 Merge pull request #1883 from ceph/quick_refact (Sébastien Han)
* c3866fc4 Merge pull request #1747 from ceph/add-iscsi (Sébastien Han)
* aa364264 resync ceph-iscsi-gw with old upstream (Sébastien Han)
* 2a1b8a19 Merge pull request #1884 from ceph/mon-container-ip (Sébastien Han)
* fdf92440 osd: drop support for device partition (Sébastien Han)
* 49ad8528 osd: refact include of `activate_osds.yml` (Guillaume Abrioux)
* 02ba65db mon: add support for monitor_address block for containers (Sébastien Han)
* 6b8ed044 Merge pull request #1761 from ceph/split_copy_keys (Sébastien Han)
* 52efe92a nfs: configure RGW FSAL to start up correctly (Ali Maredia)
* 61357c8e tests: no need to create a filesystem on /dev/sdc1 for lvm tests (Andrew Schoen)
* 383aa68b Merge pull request #1881 from ceph/followup_1724 (Sébastien Han)
* 20946f72 ceph-osd: remove deprecated comment in sample file (Guillaume Abrioux)
* 0f506f4f Docker: split the task 'copy ceph configs&keys' (Guillaume Abrioux)
* 358b3b58 Merge pull request #1863 from ceph/rpm-comments (Sébastien Han)
* 30ecbca3 Merge pull request #1840 from ceph/simply-containers (Sébastien Han)
* 2ea7f287 docker: simplify variable declaration (Sébastien Han)
* 4767eaaa Merge pull request #1878 from ceph/add-rbd-mirror (Sébastien Han)
* 70546155 ci: deploy rbd mirror (Sébastien Han)
* 6d90aef1 Merge pull request #1875 from ceph/switch-nfs (Sébastien Han)
* 477f86e3 switch to container: fix ceph nfs (Sébastien Han)
* 4f325c7e ci: remove scenario bluestore_docker_cluster (Sébastien Han)
* d46d453b Merge pull request #1780 from ceph/wip-rgw-nfs (Sébastien Han)
* b59e9cc7 Merge pull request #1871 from ceph/handler-collocate (Guillaume Abrioux)
* a05c58ba Merge pull request #1874 from ceph/rbd-mirror-mem (Sébastien Han)
* 7a93d880 ceph-rbd-mirror; docker fix typo (Sébastien Han)
* f8171e8b nfs: rename host to have ceph- prefix (Ali Maredia)
* f3e2235b nfs-ganesha: add config overrides section (Ali Maredia)
* d53f55e8 Merge pull request #1870 from Logan2211/omit-default-release (Sébastien Han)
* 44fd928e mds: rename mds_socket fact (Guillaume Abrioux)
* c907ec41 nfs: add automated testing for nfs-ganesha roles (Ali Maredia)
* 55724c6e nfs-ganesha: add dev, stable, and rhcs nfs-ganesha's for ceph-nfs role (Ali Maredia)
* 9e68a171 Merge pull request #1873 from ceph/switch-unit (Sébastien Han)
* 12f6e530 defaults: do not restart unconfigured (yet) daemons (Sébastien Han)
* fdacac9f switch: make osd collection idempotent (Sébastien Han)
* cd042dfd Merge pull request #1864 from ceph/switch (Sébastien Han)
* e46440e1 switch-from-non-containerized-to-containerized: fix devices (Sébastien Han)
* e3386b77 Merge pull request #1803 from ceph/disk-auto (Sébastien Han)
* d8cb62c9 Omit the apt default_release if it is not needed (Logan V)
* fd39552b Merge pull request #1867 from ceph/rhcs-version (Andrew Schoen)
* 3753e6cf ceph-osd: fix autodetection activation (Sébastien Han)
* 0adce6f3 Merge pull request #1842 from ceph/purge (Sébastien Han)
* 6748b5aa tests: set ceph_stable_release to luminous for rhcs (Andrew Schoen)
* b9ced956 purge: get lockbox mountpoint and unmount it (Sébastien Han)
* 27b3f9a7 Merge pull request #1850 from fultonj/issue/1848 (Sébastien Han)
* cf88c136 Merge pull request #1859 from ceph/container-limit (Sébastien Han)
* d2032c92 Merge pull request #1862 from ceph/fail-ansible (Sébastien Han)
* fc3300ea fail if ansible version < 2.3 (Sébastien Han)
* b0494643 Merge pull request #1812 from ceph/switch-migration-conta (Sébastien Han)
* 38d75d8a rpm: better comments for file removals (Ken Dreyer)
* d987d267 tests: force docker variable for switch-to-containers scenario (Guillaume Abrioux)
* a57f61ef Add option to create client keyring file but not import it (John Fulton)
* 2fa151b9 container: introduce resource limitation for containers (Sébastien Han)
* 74c9ef70 Merge pull request #1860 from ceph/ssh-timeout (Guillaume Abrioux)
* f1880429 ansible.cfg: increase ssh timeout (Sébastien Han)
* 0526e1e5 Merge pull request #1854 from ceph/add_mgr_node (Sébastien Han)
* b7db600c switch-from-non-containerized-to-containerized: mask unit files (Sébastien Han)
* b6c1a0c6 Merge pull request #1853 from ceph/fix-prepare (Sébastien Han)
* 5ed1a91a Merge pull request #1819 from ceph/no-container-log (Sébastien Han)
* c2651801 tests: Add mgr node for all scenarios (Guillaume Abrioux)
* 1dd976d2 ceph-osd: do not re-prepare if alreadyy prepared (Sébastien Han)
* 0d9489fa Merge pull request #1851 from ceph/shrkin-time (Sébastien Han)
* 579b95fd shrink-mon: wait a little bit for the mon to be out (Sébastien Han)
* e9d285a9 Merge pull request #1852 from ceph/fix-client (Sébastien Han)
* 11122a01 client: copy admin key so we can create pools and keys (Sébastien Han)
* 7e954f5b Merge pull request #1849 from ceph/client-external (Sébastien Han)
* 23a0c26c client: do not copy admin key by default (Sébastien Han)
* 5b3ba286 Merge pull request #1847 from ceph/luminous (Sébastien Han)
* 133d7c2c Merge pull request #1845 from ceph/rgw (Sébastien Han)
* 6e253a92 Merge pull request #1835 from ceph/remove-untest (Sébastien Han)
* 54d7a812 infra playbook: move untested scenario to a new dir (Sébastien Han)
* f7f4a61d Merge pull request #1836 from ceph/shrink-osd-mon (Sébastien Han)
* ab43588b ci: test luminous (Sébastien Han)
* 298a63c4 shrink mon and osd (Sébastien Han)
* 58f664fd ceph-rgw: fix systemd unit layout (Sébastien Han)
* 967e875f Merge pull request #1827 from andymcc/rgw_systemd_fix (Sébastien Han)
* 1b432e64 Merge pull request #1844 from ceph/rhcs-dev-ceph-release-fix (Andrew Schoen)
* 98d107ce common do not filter by distro when dev is set for figuring out ceph_release (Alfredo Deza)
* 673938ec Merge pull request #1839 from ceph/colonwq-update-docker-rgw-exec (Sébastien Han)
* ea9b6395 Merge pull request #1838 from ceph/rgw-units (Sébastien Han)
* 29df79e5 Merge pull request #1841 from ceph/lvm-partitions (Andrew Schoen)
* 3dd47a45 ceph-defaults: fix handlers for mds and rgw (Sébastien Han)
* 96f31e71 Merge pull request #1843 from ceph/useless-changed-task (Sébastien Han)
* 7ee1f88e ceph-common: remove useless changed task (Sébastien Han)
* 1efea767 tests parted should create gpt labels on new disk (Alfredo Deza)
* eaccc127 Update ceph_rgw_docker_extra_env to add bind ip (Keith Schincke)
* e581539e ceph-rgw: do not run a privileged rgw container (Sébastien Han)
* 53b1e1ba tests conftest conditions the no_lvm_scenario marker (Alfredo Deza)
* fec030cd tests osds units are not enabled in lvm scenarios (Alfredo Deza)
* 7ccd10a1 rgw: cleanup old code and remove systemd condition (Sébastien Han)
* 3185a287 tests: add a filesystem on /dev/sdc1 for lvm osd testing (Andrew Schoen)
* fcba9d17 ceph-osd: add support for --journal vg/lv for lvm osds (Andrew Schoen)
* d026e044 tests: create 2 partitions on /dev/sdc for lvm scenario testing (Andrew Schoen)
* 6ae82190 Merge pull request #1833 from ceph/dev-repository (Andrew Schoen)
* da90edce common dev repos should not need to specify a 'release' (Alfredo Deza)
* 6565c382 common: ceph_repository should not be rhcs or dev (Alfredo Deza)
* 8fd2bf7e common: use the value of ceph_repository in the error message (Alfredo Deza)
* 13aac502 Merge pull request #1741 from ceph/refactor-installation (Sébastien Han)
* b05271f4 Merge pull request #1724 from ceph/container-multi-journal (Sébastien Han)
* 3b07c65b Merge pull request #1831 from ceph/rbd-key (Sébastien Han)
* a60c74f6 ceph-docker-common: re-organize stat ceph file (Sébastien Han)
* 4322434a Merge pull request #1830 from ceph/ceph-client-ceph-conf (Sébastien Han)
* e0a264c7 osd: allow multi dedicated journals for containers (Sébastien Han)
* 0de8f534 site-docker.yml.sample: delegate facts (Sébastien Han)
* ae2fd459 common: refactor installation method (Sébastien Han)
* e04deb98 Merge pull request #1829 from ceph/wip-osd-test-fix (Sébastien Han)
* eab9d52d tests: fix duplicate osd service test (Ali Maredia)
* b29014f9 Merge pull request #1824 from bengland2/fix-issue-1818-try2 (Sébastien Han)
* a9d91c3d Fix RGW systemd directory (Andy McCrae)
* 21b3fd28 Merge pull request #1826 from ceph/add-mimic (Andrew Schoen)
* 57439160 common: add mimic release facts (Sébastien Han)
* fa9f2313 Merge pull request #1822 from ceph/rhcs-container-release (Sébastien Han)
* d0515cb7 Merge pull request #1825 from ceph/fix-item (Sébastien Han)
* b3e52062 Merge pull request #1814 from ceph/handler-defaults (Sébastien Han)
* cfddd290 ceph-docker-common: fix empty array (Sébastien Han)
* 764e6971 ceph-docker-common: detect ceph version (Sébastien Han)
* 617d9ee7 dont use devices var anymore, works for osd_auto_discover (Ben England)
* 146bed09 Merge pull request #1821 from ceph/test-sitepackages (David Galloway)
* 24107b9b tests: always use sitepackages=True (Andrew Schoen)
* aa69c2c0 ceph-docker-common: do not log inside the container (Sébastien Han)
* 3c294131 Merge pull request #1815 from ceph/container-key-perms (Sébastien Han)
* 24d3bdd0 Merge pull request #1517 from ceph/rolling (Sébastien Han)
* 29753da0 handler: default to empty array if task skipped (Sébastien Han)
* 0205f6d6 rolling_update: nicer way to set osd flags (Sébastien Han)
* 972eb45d ceph-docker-common: apply 0600 to key permissions (Sébastien Han)
* d132605c Merge pull request #1811 from ceph/push-galaxy (Sébastien Han)
* 5f1b8fcd ceph-osd: Fix osd start sequence (Boris Ranto)
* ef8e744c contrib: do not rework if tag exist (Sébastien Han)
* 730f351e Merge pull request #1810 from ceph/config-meta (Sébastien Han)
* 1f4082f2 update meta for ansible galaxy (Sébastien Han)
* aee8267b Merge pull request #1808 from ceph/role-path (Sébastien Han)
* 59dbf775 Merge pull request #1809 from ceph/no-sudo-fetch-dir (Sébastien Han)
* 910bb036 ceph-config: when using local_action set become: false (Andrew Schoen)
* 76ac9b07 ceph-mon: detect ANSIBLE_ROLES_PATH if present (Sébastien Han)
* ac818f5b Merge pull request #1807 from ceph/rpm-build-fix (Alfredo Deza)
* c261739c rpm update the DOC section to point to rst (Alfredo Deza)
* f568b5e1 Merge pull request #1806 from ceph/resync-group (Sébastien Han)
* d7ddf88e resync groups_vars (Sébastien Han)
* 5bda515d site: delegate fact to all the hosts (Sébastien Han)
* d0a30348 ceph-config: write ceph_conf_overrides_temp to fetch_directory (Andrew Schoen)
* 80dc5eea ceph-config: add missing meta and files for the galaxy (Sébastien Han)
* 539197a2 Introduce new role ceph-config. (Guillaume Abrioux)
* b264bfec tests: Update tests according to `ceph-config` role implementation (Guillaume Abrioux)
* 6d894e55 ceph-mon: remove hardcoded ipv4 in containers (Sébastien Han)
* 4a4a20f0 rolling update: skip pg check if num_pgs = 0 (Sébastien Han)
* e9c1ade0 Merge pull request #1799 from ceph/lvm-vg-lv (Alfredo Deza)
* 758c31b1 ceph-osd: ceph-volume requires --data to be in vg/lv format (Andrew Schoen)
* e651469a Merge pull request #1797 from ceph/purge-lvm (Alfredo Deza)
* f2499ff5 Merge pull request #1788 from ceph/improve-switch (Sébastien Han)
* 4f0ecb7f switch-from-non-containerized-to-containerized: simplify (Sébastien Han)
* bed57572 purge-cluster: adds support for purging lvm osds (Andrew Schoen)
* 594d5e01 ceph-osd: restructure lvm_volumes variable for more flexiblity (Andrew Schoen)
* daca49cd Merge pull request #1796 from ceph/resync-groupvars (Sébastien Han)
* 1d696dec resync group_vars (Sébastien Han)
* d9b3d4a9 Merge pull request #1731 from SirishaGuduru/rgw-civetwebIP-conf (Sébastien Han)
* e0c43ccc Merge pull request #1784 from ceph/fix-restart-osd-container (Sébastien Han)
* 13598694 Common: changed civetweb line in rgw section(conf) (SirishaGuduru)
* 34e114e3 Merge pull request #1625 from ceph/wip-rbd-mirror-keys (Sébastien Han)
* b70d54ac rbd-mirror should use per-host user id keyring (Jason Dillaman)
* 70c2b934 distribute rbd bootstrap key if available (Jason Dillaman)
* 1ac0969c Merge pull request #1778 from ceph/fix-1770 (Sébastien Han)
* 07821d9b Merge pull request #1786 from ceph/re-arrange-skipped (Sébastien Han)
* 8b1c5ca6 Merge pull request #1789 from mistur/master (Sébastien Han)
* a359fc35 mon, osd: fix skipped condition (Sébastien Han)
* d5c0ff35 Merge pull request #1781 from ceph/ceph-volume-tests-cli (Andrew Schoen)
* a7e45622 fix radosgw-admin call with another cluster name than "ceph" (Yoann Moulin)
* b80ba207 Merge pull request #1779 from gfidente/tripleo_switch_to_containerized (Sébastien Han)
* 7a191506 Merge pull request #1772 from ceph/docs-update (Sébastien Han)
* 38d575ce Merge pull request #1654 from andymcc/master (Sébastien Han)
* 2c01de43 Default cluster to ceph in switch to containers (Giulio Fidente)
* f0423b18 Parse ceph_docker_registry in switch to containers (Giulio Fidente)
* a59b84d5 Assume mon_docker_privileged false in switch to containers (Giulio Fidente)
* abdd6661 ceph-defaults: fix handler for osd container (Sébastien Han)
* 37ec3bc7 Merge pull request #1783 from ceph/remove-dup-var (Sébastien Han)
* 19ae8b42 resync group_vars files (Sébastien Han)
* 9540f472 tests/rgw: update tests to use new host fixture (Alfredo Deza)
* e3ff46dc tests/osd add tests for ceph-volume* executables (Alfredo Deza)
* 75060119 tests/osd: update tests to use new host fixture (Alfredo Deza)
* 31a960c3 tests/mons: update tests to use new host fixture (Alfredo Deza)
* ecf917d3 tests/install: update tests to use new host fixture (Alfredo Deza)
* c0ad0b58 tests/conftest: update node fixture for new testinfra API (Alfredo Deza)
* 0106fa68 Consume public_network vs ceph_mon_docker_subnet (Giulio Fidente)
* 386303d4 Extend set_uid fact to support RH Ceph images (Giulio Fidente)
* 9c824b98 purge: add ability to purge bluestore osd (Sébastien Han)
* b8af5fc5 Merge pull request #1695 from fullerdj/wip-djf-docker-multimds (Sébastien Han)
* 23f551a0 Merge pull request #1762 from ceph/install_pkg_rbdmirror (Sébastien Han)
* 482114e9 docs: add examples for collocated and non-collocated osd scenarios (Andrew Schoen)
* 90efa30e docs: move testing/glossary after index in glossary.rst (Andrew Schoen)
* ababc1c5 docs: remove the old README and link to the hosted docs (Andrew Schoen)
* 16faf78c docs: add docs for dev contributions (Andrew Schoen)
* da4a42de docs: add docs for ceph_conf_overrides usage (Andrew Schoen)
* a5116b2f docs: add links to example videos (Andrew Schoen)
* ae60030c docs: collocated and non-collocated scenario docs (Andrew Schoen)
* 4d85560a docs: docs for installation and basic config (Andrew Schoen)
* e0e9bb33 common: install ceph-common on all nodes (Guillaume Abrioux)
* 4671b9e7 Allow ceph service systemd overrides to be specified (Andy McCrae)
* 980c324b Merge pull request #1759 from fultonj/master (Guillaume Abrioux)
* c0455918 Set the permissions mode on all of the OpenStack keys (John Fulton)
* 550b9d5e Merge pull request #1756 from fultonj/master (Guillaume Abrioux)
* 7d429410 Allow user to specify the mode of the openstack keys (John Fulton)
* aab33188 ceph-mds: Enable multimds under docker (Douglas Fuller)