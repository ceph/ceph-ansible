ansible_devices = {
        "sda": {
            "holders": [],
            "host": "RAID bus controller: LSI Logic / Symbios Logic MegaRAID SAS 2208 [Thunderbolt] (rev 01)",
            "model": "PERC H710P",
            "partitions": {
                "sda1": {
                    "holders": [],
                    "sectors": "1024000",
                    "sectorsize": 512,
                    "size": "500.00 MB",
                    "start": "2048",
                    "uuid": "941138c1-7614-498a-911a-d20bd8a02223"
                    },
                "sda2": {
                    "holders": [
                        "rhel_gprfs033-root",
                        "rhel_gprfs033-swap",
                        "rhel_gprfs033-home"
                        ],
                    "sectors": "974673920",
                    "sectorsize": 512,
                    "size": "464.76 GB",
                    "start": "1026048",
                    }
                },
            "removable": "0",
            "rotational": "1",
            "scheduler_mode": "deadline",
            "sectors": "975699968",
            "sectorsize": "512",
            "size": "465.25 GB",
            "support_discard": "0",
            "vendor": "DELL"
            },
        "sdb": {
            "holders": [],
            "host": "RAID bus controller: LSI Logic / Symbios Logic MegaRAID SAS 2208 [Thunderbolt] (rev 01)",
            "model": "PERC H710P",
            "partitions": {},
            "removable": "0",
            "rotational": "1",
            "scheduler_mode": "deadline",
            "sectors": "1952448512",
            "sectorsize": "512",
            "size": "931.00 GB",
            "support_discard": "0",
            "vendor": "DELL"
            },
        "sdc": {
            "holders": [],
            "host": "RAID bus controller: LSI Logic / Symbios Logic MegaRAID SAS 2208 [Thunderbolt] (rev 01)",
            "model": "PERC H710P",
            "partitions": {
                "sdc6": {
                    "holders": [],
                    "sectors": "41943040",
                    "sectorsize": 512,
                    "size": "20.00 GB",
                    "start": "335546368",
                    },
                "sdc7": {
                    "holders": [],
                    "sectors": "41943040",
                    "sectorsize": 512,
                    "size": "20.00 GB",
                    "start": "377489408",
                    }
                },
            "removable": "0",
            "rotational": "1",
            "scheduler_mode": "deadline",
            "sectors": "1952448512",
            "sectorsize": "512",
            "size": "931.00 GB",
            "support_discard": "0",
            "vendor": "DELL"
            },
        "sdd": {
                "holders": [],
                "host": "RAID bus controller: LSI Logic / Symbios Logic MegaRAID SAS 2208 [Thunderbolt] (rev 01)",
                "model": "PERC H710P",
                "partitions": {
                    "sdd1": {
                        "holders": [],
                        "sectors": "1952241631",
                        "sectorsize": 512,
                        "size": "930.90 GB",
                        "start": "206848",
                        "uuid": "2df7d8aa-1daa-4456-bcb3-a233b06d32e1"
                        }
                    },
                "removable": "0",
                "rotational": "1",
                "scheduler_mode": "deadline",
                "sectors": "1952448512",
                "sectorsize": "512",
                "size": "931.00 GB",
                "support_discard": "0",
                "vendor": "DELL"
                },
        "sde": {
                "holders": [],
                "host": "RAID bus controller: LSI Logic / Symbios Logic MegaRAID SAS 2208 [Thunderbolt] (rev 01)",
                "model": "PERC H710P",
                "partitions": {
                    "sde1": {
                        "holders": [],
                        "sectors": "1952446431",
                        "sectorsize": 512,
                        "size": "931.00 GB",
                        "start": "2048",
                        "uuid": "76266140-2330-41de-b346-fd07e1073f46"
                        }
                    },
                "removable": "0",
                "rotational": "1",
                "scheduler_mode": "deadline",
                "sectors": "1952448512",
                "sectorsize": "512",
                "size": "931.00 GB",
                "support_discard": "0",
                "vendor": "DELL"
                },
        "sdf": {
                "holders": [],
                "host": "RAID bus controller: LSI Logic / Symbios Logic MegaRAID SAS 2208 [Thunderbolt] (rev 01)",
                "model": "PERC H710P",
                "partitions": {},
                "removable": "0",
                "rotational": "1",
                "scheduler_mode": "deadline",
                "sectors": "1952448512",
                "sectorsize": "512",
                "size": "931.00 GB",
                "support_discard": "0",
                "vendor": "DELL"
                },
        "sdg": {
                "holders": [],
                "host": "RAID bus controller: LSI Logic / Symbios Logic MegaRAID SAS 2208 [Thunderbolt] (rev 01)",
                "model": "PERC H710P",
                "partitions": {},
                "removable": "0",
                "rotational": "1",
                "scheduler_mode": "deadline",
                "sectors": "1952448512",
                "sectorsize": "512",
                "size": "931.00 GB",
                "support_discard": "0",
                "vendor": "DELL"
                },
        "sdh": {
                "holders": [],
                "host": "RAID bus controller: LSI Logic / Symbios Logic MegaRAID SAS 2208 [Thunderbolt] (rev 01)",
                "model": "PERC H710P",
                "partitions": {},
                "removable": "0",
                "rotational": "1",
                "scheduler_mode": "deadline",
                "sectors": "1952448512",
                "sectorsize": "512",
                "size": "931.00 GB",
                "support_discard": "0",
                "vendor": "DELL"
                },
        "sdi": {
                "holders": [],
                "host": "RAID bus controller: LSI Logic / Symbios Logic MegaRAID SAS 2208 [Thunderbolt] (rev 01)",
                "model": "PERC H710P",
                "partitions": {},
                "removable": "0",
                "rotational": "1",
                "scheduler_mode": "deadline",
                "sectors": "1952448512",
                "sectorsize": "512",
                "size": "931.00 GB",
                "support_discard": "0",
                "vendor": "DELL"
                },
        "sdj": {
                "holders": [],
                "host": "RAID bus controller: LSI Logic / Symbios Logic MegaRAID SAS 2208 [Thunderbolt] (rev 01)",
                "model": "PERC H710P",
                "partitions": {},
                "removable": "0",
                "rotational": "1",
                "scheduler_mode": "deadline",
                "sectors": "1952448512",
                "sectorsize": "512",
                "size": "931.00 GB",
                "support_discard": "0",
                "vendor": "DELL"
                },
        "sdk": {
                "holders": [],
                "host": "RAID bus controller: LSI Logic / Symbios Logic MegaRAID SAS 2208 [Thunderbolt] (rev 01)",
                "model": "PERC H710P",
                "partitions": {},
                "removable": "0",
                "rotational": "1",
                "scheduler_mode": "deadline",
                "sectors": "1952448512",
                "sectorsize": "512",
                "size": "931.00 GB",
                "support_discard": "0",
                "vendor": "DELL"
                },
        "sdl": {
                "holders": [],
                "host": "RAID bus controller: LSI Logic / Symbios Logic MegaRAID SAS 2208 [Thunderbolt] (rev 01)",
                "model": "PERC H710P",
                "partitions": {},
                "removable": "0",
                "rotational": "1",
                "scheduler_mode": "deadline",
                "sectors": "1952448512",
                "sectorsize": "512",
                "size": "931.00 GB",
                "support_discard": "0",
                "vendor": "DELL"
                },
        "sdm": {
                "holders": [],
                "host": "RAID bus controller: LSI Logic / Symbios Logic MegaRAID SAS 2208 [Thunderbolt] (rev 01)",
                "model": "PERC H710P",
                "partitions": {},
                "removable": "0",
                "rotational": "1",
                "scheduler_mode": "deadline",
                "sectors": "1952448512",
                "sectorsize": "512",
                "size": "931.00 GB",
                "support_discard": "0",
                "vendor": "DELL"
                }
        }

disk_by_id = {
        'dm-name-rhel_gprfs033-home': '../../dm-2',
        'dm-name-rhel_gprfs033-root': '../../dm-0',
        'dm-name-rhel_gprfs033-swap': '../../dm-1',
        'dm-uuid-LVM-IBIH2Is9AuG8meY9mjydqQNWubj59ymm8hQDSM9zYkpmNBmUTA1XoCG1vT04XeOF': '../../dm-2',
        'dm-uuid-LVM-IBIH2Is9AuG8meY9mjydqQNWubj59ymmA5uB3zfSajamWvZVh0PMnA7OE4jxzYmQ': '../../dm-0',
        'dm-uuid-LVM-IBIH2Is9AuG8meY9mjydqQNWubj59ymmWJV9ri50DzAqdz0pAUGQf7e5SzFNdUuv': '../../dm-1',
        'lvm-pv-uuid-FCOTaQ-i6ye-dsQz-4WRi-DhSE-gPxd-bmLl9Z': '../../sda2',
        'scsi-36848f690e68a50001bbef0a0094625c1': '../../sda',
        'scsi-36848f690e68a50001bbef0a0094625c1-part1': '../../sda1',
        'scsi-36848f690e68a50001bbef0a0094625c1-part2': '../../sda2',
        'scsi-36848f690e68a50001e428e4f1e211ba2': '../../sdb',
        'scsi-36848f690e68a50001e428e4f1e2b4baf': '../../sdc',
        'scsi-36848f690e68a50001e428e4f1e2b4baf-part6': '../../sdc6',
        'scsi-36848f690e68a50001e428e4f1e2b4baf-part7': '../../sdc7',
        'scsi-36848f690e68a50001e428e501e358d6f': '../../sdd',
        'scsi-36848f690e68a50001e428e501e358d6f-part1': '../../sdd1',
        'scsi-36848f690e68a50001e428e511e3fb33c': '../../sde',
        'scsi-36848f690e68a50001e428e511e3fb33c-part1': '../../sde1',
        'scsi-36848f690e68a50001e428e511e4a6c20': '../../sdf',
        'scsi-36848f690e68a50001e428e521e55c62b': '../../sdg',
        'scsi-36848f690e68a50001e428e531e60f90f': '../../sdh',
        'scsi-36848f690e68a50001e428e541e6c6027': '../../sdi',
        'scsi-36848f690e68a50001e428e541e778a3c': '../../sdj',
        'scsi-36848f690e68a50001e428e551e831be3': '../../sdk',
        'scsi-36848f690e68a50001e428e561e8e3478': '../../sdl',
        'scsi-36848f690e68a50001e428e571e9dccd1': '../../sdm',
        'wwn-0x6848f690e68a50001bbef0a0094625c1': '../../sda',
        'wwn-0x6848f690e68a50001bbef0a0094625c1-part1': '../../sda1',
        'wwn-0x6848f690e68a50001bbef0a0094625c1-part2': '../../sda2',
        'wwn-0x6848f690e68a50001e428e4f1e211ba2': '../../sdb',
        'wwn-0x6848f690e68a50001e428e4f1e2b4baf': '../../sdc',
        'wwn-0x6848f690e68a50001e428e4f1e2b4baf-part6': '../../sdc6',
        'wwn-0x6848f690e68a50001e428e4f1e2b4baf-part7': '../../sdc7',
        'wwn-0x6848f690e68a50001e428e501e358d6f': '../../sdd',
        'wwn-0x6848f690e68a50001e428e501e358d6f-part1': '../../sdd1',
        'wwn-0x6848f690e68a50001e428e511e3fb33c': '../../sde',
        'wwn-0x6848f690e68a50001e428e511e3fb33c-part1': '../../sde1',
        'wwn-0x6848f690e68a50001e428e511e4a6c20': '../../sdf',
        'wwn-0x6848f690e68a50001e428e521e55c62b': '../../sdg',
        'wwn-0x6848f690e68a50001e428e531e60f90f': '../../sdh',
        'wwn-0x6848f690e68a50001e428e541e6c6027': '../../sdi',
        'wwn-0x6848f690e68a50001e428e541e778a3c': '../../sdj',
        'wwn-0x6848f690e68a50001e428e551e831be3': '../../sdk',
        'wwn-0x6848f690e68a50001e428e561e8e3478': '../../sdl',
        'wwn-0x6848f690e68a50001e428e571e9dccd1': '../../sdm'
        }


def prepare_test_get_block_devices_persistent_name():
    # Create an empty structure with only disk name to be more readable
    disk_facts = {}
    for disk in ["sda", "sdb", "sdc", "sde", "sdf", "sdg", "sdh", "sdi", "sdj",
            "sdk", "sdl", "sdm", "dm-0", "dm-1", "dm-2"]:
        disk_facts[disk] = {"name": disk}

    expected_result = {
            'scsi-36848f690e68a50001e428e551e831be3': {'name': 'sdk', 'bdev' : '/dev/disk/by-id/scsi-36848f690e68a50001e428e551e831be3'},
            'scsi-36848f690e68a50001e428e511e3fb33c': {'name': 'sde', 'bdev' : '/dev/disk/by-id/scsi-36848f690e68a50001e428e511e3fb33c'},
            'scsi-36848f690e68a50001e428e521e55c62b': {'name': 'sdg', 'bdev' : '/dev/disk/by-id/scsi-36848f690e68a50001e428e521e55c62b'},
            'scsi-36848f690e68a50001e428e531e60f90f': {'name': 'sdh', 'bdev' : '/dev/disk/by-id/scsi-36848f690e68a50001e428e531e60f90f'},
            'scsi-36848f690e68a50001e428e4f1e211ba2': {'name': 'sdb', 'bdev' : '/dev/disk/by-id/scsi-36848f690e68a50001e428e4f1e211ba2'},
            'dm-name-rhel_gprfs033-swap': {'name': 'dm-1', 'bdev' : '/dev/disk/by-id/dm-name-rhel_gprfs033-swap'},
            'scsi-36848f690e68a50001e428e4f1e2b4baf': {'name': 'sdc', 'bdev' : '/dev/disk/by-id/scsi-36848f690e68a50001e428e4f1e2b4baf'},
            'scsi-36848f690e68a50001e428e561e8e3478': {'name': 'sdl', 'bdev' : '/dev/disk/by-id/scsi-36848f690e68a50001e428e561e8e3478'},
            'scsi-36848f690e68a50001e428e511e4a6c20': {'name': 'sdf', 'bdev' : '/dev/disk/by-id/scsi-36848f690e68a50001e428e511e4a6c20'},
            'scsi-36848f690e68a50001e428e541e778a3c': {'name': 'sdj', 'bdev' : '/dev/disk/by-id/scsi-36848f690e68a50001e428e541e778a3c'},
            'scsi-36848f690e68a50001bbef0a0094625c1': {'name': 'sda', 'bdev' : '/dev/disk/by-id/scsi-36848f690e68a50001bbef0a0094625c1'},
            'dm-name-rhel_gprfs033-root': {'name': 'dm-0', 'bdev' : '/dev/disk/by-id/dm-name-rhel_gprfs033-root'},
            'dm-name-rhel_gprfs033-home': {'name': 'dm-2', 'bdev' : '/dev/disk/by-id/dm-name-rhel_gprfs033-home'},
            'scsi-36848f690e68a50001e428e571e9dccd1': {'name': 'sdm', 'bdev' : '/dev/disk/by-id/scsi-36848f690e68a50001e428e571e9dccd1'},
            'scsi-36848f690e68a50001e428e541e6c6027': {'name': 'sdi', 'bdev' : '/dev/disk/by-id/scsi-36848f690e68a50001e428e541e6c6027'}
            }

    return (disk_facts, expected_result)


def prepare_test_select_only_free_devices():
    expected_result = ansible_devices

    # Removing disks that are known to have partitions
    for disk in ["sda", "sdc", "sdd", "sde"]:
        del expected_result[disk]

    return expected_result
